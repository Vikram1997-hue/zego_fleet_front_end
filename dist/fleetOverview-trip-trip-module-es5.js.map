{"version":3,"sources":["webpack:///src/app/main/fleetOverview/trip/trip-dashboard/trip-dashboard.component.ts","webpack:///src/app/main/fleetOverview/trip/trip-dashboard/trip-dashboard.component.html","webpack:///src/app/main/fleetOverview/trip/trip-detail/trip-detail.component.ts","webpack:///src/app/main/fleetOverview/trip/trip-detail/trip-detail.component.html","webpack:///src/app/main/fleetOverview/trip/trip-detail/chart-data.html","webpack:///src/app/main/fleetOverview/trip/trip-routing.module.ts","webpack:///src/app/main/fleetOverview/trip/trip.module.ts"],"names":["TripDashboardComponent","router","service","localService","activeRoute","translate","isCollapsed","hideToggle","gaugeType","gaugeValue","thresholdConfig","gaugeThreshold","gaugeMin","gaugeMax","maxDate","colorBox","stackBar","value","speed","color","name","showStackBar","noRoadTypeData","tableView","vehicleCategoryData","vehicleList","driverList","selected","startDate","subtract","startOf","set","endDate","endOf","selectedShow","selectedVehicleCategory","selectedVehicle","selectedDriver","tripToolTipData","page","limit","pageSizeOptions","tripHistory","isTripHistoryLoading","tripBehaviour","alertsCount","alertsData","filterCalledTrip","customeRange","setDate","cancelDate","isRoadTypeLoading","getLang","subscribe","val","get","text","i","length","includes","replace","split","changeLangRoadDis","Number","getItem","selectedOrgID","JSON","parse","pipe","resetToLastState","filterApply","getFilter","url","trip","next","updatePageData","searchCategory","stringify","response","data","error","categoryId","undefined","searchVehicle","vehicleId","searchDriver","driverId","search","querryParams","createQuerryparams","dashboardData","driving_behaviour","parseFloat","formatToFixed","contribution_value","toFixed","road_factor_name","filter","x","totalCount","count","rows","forEach","element","push","id","getexception","getTooltipInfo","setPage","post","res","ele","k","exception_events","event","pageSize","queryParams","navigate","queryParamsHandling","pageIndex","setItem","category","vehicle","driver","getTripHistory","tableData","convertFormat","precision","searchString","changeState","params","getRoadTypeDistribution","date","listing","roadType","checkCustomDate","format","arr","index","paginator","toggleChange","pageChange","selector","templateUrl","styleUrls","TripDetailComponent","elementRef","dialog","tripDetail","hideToggle1","displayMode","multi","disabled","mapAlerts","speedProfile","time","accProfile","acc","deacc","alerts","exceptionTypeObj","breaking","acceleration","cornering","idling","exceptionArray","exceptionCount","exceptionKeys","exceptionShowOnMap","dayNightScore","dayScore","nightScore","roadTypeLabel","roadTypeData","label","register","setTimeout","createAccProfileChart","createSpeedProfileChart","newbarChart","tripId","snapshot","getAllAlerts","getTripDetails","getTripException","lineChartScore","point","pointsSecond","linemyChartScore","destroy","labels","datapoints","dayDrive","nightDrive","htmlRef","nativeElement","querySelector","gradient","getContext","createLinearGradient","addColorStop","dataSet","borderColor","pointBackgroundColor","borderWidth","fill","cubicInterpolationMode","tension","backgroundColor","type","datasets","options","responsive","maintainAspectRatio","elements","radius","plugins","legend","display","tooltip","enabled","titleAlign","footerAlign","bodyAlign","titleColor","displayColors","callbacks","labelTextColor","context","interaction","intersect","scales","y","max","ticks","getSpeedProfileData","getAccelerationProfileData","idling_score","acceleration_score","braking","breaking_score","cornering_score","speed_score","document","getElementById","scrollIntoView","behavior","yLabel","map","barchartdata","_this","position","title","datalabels","font","size","family","anchor","align","formatter","convertToDutch","grid","drawOnChartArea","weight","beginAtZero","callback","values","Math","round","dateTime","utc","property_value","waypoint","road_speed","timestamp","isCustom","provider","trim","property_id","speedChart","dataset1","dataset2","up","ctx","p0DataIndex","stepped","usePointStyle","mode","axis","stack","stackWeight","accChart","breakingprofile","accelerationprofile","chartData","chart","dialogRef","open","DialogContentExampleDialog","disableClose","panelClass","height","width","afterClosed","result","key","total_time","distance","duration_seconds","window","history","back","stopTime","startTime","duration","diff","as","obj","singleAlertId","goToLastPage","openChartPopup","firstAccordion","safeScoreCheckbox","otherCheckbox","segment","splice","myChart","zoom","wheel","pinch","drag","resetZoom","close","num","onNoClick","routes","path","component","pathMatch","TripRoutingModule","forChild","imports","exports","TripModule","forRoot","extend","declarations"],"mappings":"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","file":"fleetOverview-trip-trip-module-es5.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { LocalService } from 'src/app/services/local.service';\nimport { MainService } from 'src/app/services/main.service';\nimport * as moment from 'moment';\nimport { AppConfig } from 'src/app/config/app-config';\nimport { RouteConfig } from 'src/app/config/route-config';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'app-trip-dashboard',\n  templateUrl: './trip-dashboard.component.html',\n  styleUrls: ['./trip-dashboard.component.scss']\n})\nexport class TripDashboardComponent implements OnInit {\n  @ViewChild(MatPaginator) paginator: MatPaginator;\n  public isCollapsed = true;\n  searchString: string;\n  // GUAGE CHART VARIABLES\n\n  hideToggle = false;\n  gaugeType = \"semi\";\n  gaugeValue = 28.3;\n\n  thresholdConfig = AppConfig.gaugeThreshold;\n\n  gaugeMin = AppConfig.gaugeMin;\n  gaugeMax = AppConfig.gaugeMax;\n  maxDate: any = moment();\n  // stacked bar variable\n\n  colorBox: any = [\"#ed502e\", \"#604EFF\", \"#F0CE00\", \"#4dbfff\", \"#2A1E91\"];\n\n  stackBar = [\n    { value: 0, class: \"ridOfmax1\", speed: '0', color: '', name: '' },\n    { value: 0, class: \"busyRoad1\", speed: '0', color: '', name: '' },\n    { value: 0, class: \"quietRoad1\", speed: '0', color: '', name: '' },\n    { value: 0, class: \"buildUp1\", speed: '0', color: '', name: '' },\n    { value: 0, class: \"ridOfHighSpeed1\", speed: '0', color: '', name: '' }\n  ]\n\n  showStackBar = [];\n  noRoadTypeData: boolean = true;\n\n  tableView: string = 'table';\n  selectedOrgID: any;\n\n  searchCategory: string;\n  searchVehicle: string;\n  searchDriver: string;\n\n  dashboardData: any;\n  vehicleCategoryData: any = [];\n  vehicleList: any = [];\n  driverList: any = [];\n\n  selected: any = {\n    startDate: moment().subtract(1, 'month').startOf('month').set('hours', 0).set('minutes', 0),\n    endDate: moment().subtract(1, 'month').endOf('month').set('hours', 23).set('minutes', 59)\n  };\n  selectedShow: any = {\n    startDate: moment().subtract(1, 'month').startOf('month').set('hours', 0).set('minutes', 0),\n    endDate: moment().subtract(1, 'month').endOf('month').set('hours', 23).set('minutes', 59)\n  };\n\n  selectedVehicleCategory: any = 'all';\n  selectedVehicle: any = 'all';\n  selectedDriver: any = 'all';\n  tripToolTipData: any = {};\n\n  page: number = 1;\n  limit: number = 5;\n  totalCount: number;\n  pageSizeOptions: number[] = [5, 10, 25];\n  tripHistory: any = [];\n  isTripHistoryLoading: boolean = true;\n  tripBehaviour: any = {};\n  // \n  alertsCount = [];\n  alertsData = [];\n\n  filterCalledTrip = new Subject();\n\n  constructor(\n    private router: Router,\n    public service: MainService,\n    private localService: LocalService,\n    private activeRoute: ActivatedRoute,\n    private translate: TranslateService\n  ) {\n  }\n  customeRange='Custom';\n  setDate='Set Date';\n  cancelDate='Cancel';\n  changeLangRoadDis(){\n  \n    \n    this.localService.getLang().subscribe((val) => {\n      this.translate.get(\"kmph\").subscribe((text: string) => {\n        for(var i=0;i<this.stackBar.length;i++){\n          if(this.stackBar[i].speed.includes('kmph')){\n            this.stackBar[i].speed= this.stackBar[i].speed.replace(/kmph/gi,'km/u')\n          }\n          else if(this.stackBar[i].speed.includes('km/u')){\n            this.stackBar[i].speed= this.stackBar[i].speed.split(' ')[0] + \" \" + 'kmph';\n           }\n        }      \n      });\n    });\n  }\n\n  ngOnInit(): void {\n    this.changeLangRoadDis()\n    this.filterCalledTrip = new Subject();\n\n    this.limit = Number(this.localService.getItem(\"tripLimit\")) || 5;\n    this.selectedOrgID = this.localService.getItem(\"selectedOrgs\")\n    if (this.selectedOrgID) {\n      this.selectedOrgID = JSON.parse(this.selectedOrgID);\n    }\n\n    this.filterCalledTrip.pipe(\n      debounceTime(500),\n    ).subscribe(\n      value => {\n        if(value){\n          this.selectedOrgID = this.localService.getItem(\"selectedOrgs\")\n          if (this.selectedOrgID) {\n            this.selectedOrgID = JSON.parse(this.selectedOrgID);\n          }\n          this.resetToLastState();\n          this.filterApply();\n        }\n      }\n    )\n\n    this.localService.getFilter().subscribe((val)=>{\n      if(val && this.router.url.split('?')[0] == RouteConfig.trip.url){\n        this.filterCalledTrip.next(true)\n      }\n    })\n\n    if (this.selectedOrgID) {\n      this.resetToLastState();\n      this.updatePageData()\n    }\n  }\n\n  getVehicleCategory() {\n    this.searchCategory = '';\n    this.service.get(`vehicles/category-by-organisation?organisation=${JSON.stringify(this.selectedOrgID)}`).pipe().subscribe(response => {\n      if (response.data && response.data.length) {\n        this.vehicleCategoryData = response.data;\n      }\n    }, (error) => {\n\n    })\n  }\n\n  getVehicles(categoryId?) {\n    if ((categoryId && categoryId == 'all') || categoryId == undefined) {\n      categoryId = ''\n    }\n    this.searchVehicle = '';\n    this.service.get(`vehicles/by-organisation?organisation=${JSON.stringify(this.selectedOrgID)}`).pipe().subscribe(response => {\n      if (response.data && response.data.length) {\n        this.vehicleList = response.data;\n      }\n      // this.getUpdatedStats()\n    }, (error) => {\n\n    })\n  }\n\n  getDriverList(categoryId?, vehicleId?) {\n    if ((categoryId && categoryId == 'all') || categoryId == undefined) {\n      categoryId = ''\n    }\n    if ((vehicleId && vehicleId == 'all') || vehicleId == undefined) {\n      vehicleId = ''\n    }\n    this.searchDriver = '';\n    this.service.get(`drivers/by-organisation?organisation=${JSON.stringify(this.selectedOrgID)}`).pipe().subscribe(response => {\n      if (response.data) {\n        this.driverList = response.data;\n      }\n    }, (error) => {\n\n    })\n  }\n\n\n  getTripDashboardData(categoryId?, vehicleId?, driverId?, search?) {\n    let querryParams = this.createQuerryparams(categoryId, vehicleId, driverId, search, undefined, false)\n    this.service.get(`trips/report?${querryParams}`).pipe().subscribe(response => {\n      if (response.data) {\n        this.dashboardData = response.data;\n        this.dashboardData.driving_behaviour = parseFloat(this.formatToFixed(this.dashboardData.driving_behaviour, 1));\n      }\n      else {\n        this.dashboardData = {};\n      }\n    }, (error) => {\n      this.dashboardData = {};\n    })\n  }\n\n  isRoadTypeLoading: boolean = false;\n  getRoadTypeDistribution(categoryId?, vehicleId?, driverId?, search?) {\n    this.isRoadTypeLoading = true;\n    let querryParams = this.createQuerryparams(categoryId, vehicleId, driverId, search, undefined, true)\n    this.service.get(`trips/road-type-distribution?${querryParams}`).pipe().subscribe(response => {\n      this.isRoadTypeLoading = false;\n      if (response.data && response.data.length) {\n        \n        for (let i = 0; i < response.data.length; i++) {\n          if (this.stackBar[i]) {\n            this.stackBar[i].value = response.data[i].contribution_value.toFixed(1);\n            this.stackBar[i].speed = response.data[i].road_factor_name\n            this.stackBar[i].color = this.colorBox[i];\n            if (response.data[i].road_factor_name == 'roadFactor1') {\n              this.stackBar[i].name = 'Highway'\n            }\n            else {\n              this.stackBar[i].name = 'Lorem'\n            }\n          }\n        }\n        this.translate.get(\"kmph\").subscribe((text: string) => {\n          for(var i=0;i<this.stackBar.length;i++){\n            if(this.stackBar[i].speed.includes('kmph')){\n              this.stackBar[i].speed= this.stackBar[i].speed.replace(/kmph/gi,text)\n            }\n            // else if(this.stackBar[i].speed.includes('km/u')){\n            //   this.stackBar[i].speed= this.stackBar[i].speed.replace(/''/gi,'kmph')\n            // }\n          }\n          //  console.log(this.stackBar);\n                 \n        });\n        this.showStackBar = this.stackBar.filter((x) => {\n          return x.value > 0;\n        })\n\n        if (!this.showStackBar.length) {\n          this.noRoadTypeData = true;\n        }\n        else {\n          this.noRoadTypeData = false;\n        }\n      }\n      else {\n        this.noRoadTypeData = true;\n      }\n    }, (error) => {\n      this.noRoadTypeData = true;\n      this.isRoadTypeLoading = false;\n    })\n  }\n\n  getTripHistory(categoryId?, vehicleId?, driverId?, search?) {\n    this.isTripHistoryLoading = true;\n    this.tripHistory = [];\n    let querryParams = this.createQuerryparams(categoryId, vehicleId, driverId, search, 'listing')\n    this.service.get(`trips?${querryParams}`).pipe().subscribe(response => {\n      if (response.data) {\n        this.isTripHistoryLoading = false;\n        this.totalCount = response.data.count;\n        this.tripHistory = [...response.data.rows];\n        this.alertsCount = [];\n        response.data.rows.forEach(element => {\n          this.alertsCount.push(element.id)\n        });\n        if (this.totalCount) {\n          this.getexception();\n          this.getTooltipInfo(this.tripHistory)\n        }\n        this.setPage(this.page - 1);\n      }\n      else {\n        this.totalCount = 0;\n        this.tripHistory = [];\n      }\n    }, (error) => {\n      this.isTripHistoryLoading = false;\n      this.tripHistory = [];\n    })\n  }\n  getexception() {\n    const data = {\n      \"tripId\": this.alertsCount\n    }\n    this.service.post('trips/alerts', data).pipe().subscribe(res => {\n      if (res.data) {\n        this.tripHistory.filter((ele, i) => {\n          for (const k in res.data) {\n            if (ele.id == k) {\n              this.tripHistory[i].exception_events = ((res.data)[k]);\n            }\n          }\n        })\n      }\n    })\n  }\n\n  toggleChange(value) {\n    this.tableView = value;\n  }\n\n  pageChange(event) {\n    if (this.limit !== event.pageSize) {\n      const queryParams: Params = { page: 1 };\n      this.router.navigate(\n        [],\n        {\n\n          queryParams: queryParams,\n          queryParamsHandling: 'merge', // remove to replace all query params by provided\n        });\n      this.page = 1;\n    }\n    else {\n      const queryParams: Params = { page: event.pageIndex + 1 };\n      this.router.navigate(\n        [],\n        {\n\n          queryParams: queryParams,\n          queryParamsHandling: 'merge', // remove to replace all query params by provided\n        });\n      this.page = event.pageIndex + 1;\n    }\n    this.limit = event.pageSize;\n    this.localService.setItem(\"tripLimit\", this.limit);\n    this.isCollapsed = true;\n    let category = this.localService.getItem(\"category\")\n    let vehicle = this.localService.getItem(\"vehicle\")\n    let driver = this.localService.getItem(\"driver\")\n    let search = this.localService.getItem(\"search\")\n    this.getTripHistory(category, vehicle, driver, search)\n  }\n\n  getTooltipInfo(tableData) {\n    const data = {\n      \"tripId\": this.alertsCount\n    }\n    this.service.post('trips/exception-counts', data).pipe().subscribe(res => {\n      if (res.data) {\n        for (const k in res.data) {\n          this.tripToolTipData[k] = this.service.convertFormat((res.data)[k]);\n        }\n      }\n    })\n  }\n\n  formatToFixed(val, precision) {\n    if (typeof val == 'string') {\n      val = parseFloat(val)\n    }\n    if (val) {\n      return val.toFixed(precision);\n    }\n    return 0;\n  }\n\n  filterApply() {\n    this.localService.setItem(\"category\", this.selectedVehicleCategory)\n    this.localService.setItem(\"vehicle\", this.selectedVehicle)\n    this.localService.setItem(\"driver\", this.selectedDriver)\n    this.localService.setItem(\"search\", this.searchString)\n    this.localService.setItem(\"dateRange\", JSON.stringify(this.selectedShow))\n    this.selected = this.selectedShow;\n    this.updatePageData();\n    this.changeState();\n  }\n\n  updatePageData() {\n    // this.page = 1;\n    this.activeRoute.queryParams\n      .subscribe(params => {\n        // const details:any = params.page;\n        this.page = params?.page || 1;\n      }\n      );\n    // this.getTripDashboardData();\n    // this.getDashboardData();\n    this.totalCount = 0;\n    this.searchVehicle = '';\n    this.searchCategory = '';\n    this.searchDriver = '';\n    // this.getDashboardData(this.selectedVehicleCategory, this.selectedVehicle, this.selectedDriver, this.searchString)\n    this.getTripHistory(this.selectedVehicleCategory, this.selectedVehicle, this.selectedDriver, this.searchString)\n    this.getRoadTypeDistribution(this.selectedVehicleCategory, this.selectedVehicle, this.selectedDriver, this.searchString)\n  }\n\n  resetToLastState() {\n    let category = this.localService.getItem(\"category\")\n    let vehicle = this.localService.getItem(\"vehicle\")\n    let driver = this.localService.getItem(\"driver\")\n    let search = this.localService.getItem(\"search\")\n    let date: any = this.localService.getItem(\"dateRange\")\n    if (date) {\n      date = JSON.parse(date)\n      this.selected = {\n        startDate: moment(date.startDate),\n        endDate: moment(date.endDate)\n      };\n      this.selectedShow = this.selected;\n    }\n    else {\n      this.selectedShow = {\n        startDate: moment().subtract(1, 'month').startOf('month').set('hours', 0).set('minutes', 0),\n        endDate: moment().subtract(1, 'month').endOf('month').set('hours', 23).set('minutes', 59)\n      };\n      this.selected = {\n        startDate: moment().subtract(1, 'month').startOf('month').set('hours', 0).set('minutes', 0),\n        endDate: moment().subtract(1, 'month').endOf('month').set('hours', 23).set('minutes', 59)\n      };\n    }\n    search ? this.searchString = search : this.searchString = '';\n    category && category !== 'all' ? this.selectedVehicleCategory = JSON.parse(category) : this.selectedVehicleCategory = 'all';\n    vehicle && vehicle !== 'all' ? this.selectedVehicle = JSON.parse(vehicle) : this.selectedVehicle = 'all';\n    driver && driver !== 'all' ? this.selectedDriver = JSON.parse(driver) : this.selectedDriver = 'all';\n  }\n\n  changeState() {\n    this.isCollapsed = !this.isCollapsed;\n    if (!this.isCollapsed) {\n      this.resetToLastState();\n    }\n  }\n\n  createQuerryparams(categoryId?, vehicleId?, driverId?, search?, listing?, roadType?) {\n    let querryParams\n    if (listing) {\n      querryParams = `organisation=${JSON.stringify(this.selectedOrgID)}&page=${this.page}&limit=${this.limit}`;\n    }\n    else {\n      querryParams = `organisation=${JSON.stringify(this.selectedOrgID)}`;\n    }\n\n    if (roadType) {\n      querryParams = querryParams + `&custom_filter=true&filter_value=''`\n    }\n    else {\n      let val = this.service.checkCustomDate(moment(this.selected.startDate).format('YYYY-MM-DD'), moment(this.selected.endDate).format('YYYY-MM-DD'))\n      if (val == undefined) {\n        querryParams = querryParams + `&custom_filter=true&filter_value=''`\n      }\n      else {\n        if ((categoryId && categoryId !== 'all') || (vehicleId && vehicleId !== 'all') || (driverId && driverId !== 'all')) {\n          querryParams = querryParams + `&custom_filter=true&filter_value=''`\n        }\n        else {\n          querryParams = querryParams + `&custom_filter=false&filter_value=${val}`\n        }\n      }\n    }\n\n    if ((categoryId && categoryId !== 'all')) {\n      let arr = [categoryId]\n      querryParams = querryParams + `&vehicle_category=${JSON.stringify(arr)}`\n    }\n    if ((vehicleId && vehicleId !== 'all')) {\n      let arr = [vehicleId]\n      querryParams = querryParams + `&vehicle=${JSON.stringify(arr)}`\n    }\n    if ((driverId && driverId !== 'all')) {\n      let arr = [driverId]\n      querryParams = querryParams + `&driver=${JSON.stringify(arr)}`\n    }\n    querryParams = querryParams + `&from_date=${moment(this.selected.startDate).format('YYYY-MM-DD')}`\n    querryParams = querryParams + `&to_date=${moment(this.selected.endDate).format('YYYY-MM-DD')}`\n    return querryParams;\n  }\n\n  resetFilter() {\n    this.selectedVehicleCategory = 'all';\n    this.selectedDriver = 'all';\n    this.selectedVehicle = 'all';\n    this.searchString = '';\n    this.selectedShow = {\n      startDate: moment().subtract(1, 'month').startOf('month').set('hours', 0).set('minutes', 0),\n      endDate: moment().subtract(1, 'month').endOf('month').set('hours', 23).set('minutes', 59)\n    };\n    this.filterApply();\n  }\n\n  setPage(index: number) {\n    if (this.paginator)\n      this.paginator.pageIndex = index;\n  }\n\n}\n","<div class='mainBox mb-20 '>\n  <div class=\"roadFactorSec\">\n    <h4 class=\"typeTitle mb-0 mr-3\">{{\"vehicleDrivenMost\" | translate}}</h4>\n    <!-- <div class=\"w-100\" id=\"vehDrivenMost\">\n\n    </div> -->\n    <!-- <div class=\"getRide\">\n        <p *ngFor=\"let item of showStackBar\" [ngClass]=\"item.class\"> {{item.speed || 'NA'}}<span class=\"msg\"\n                [ngStyle]=\"{'color': item?.color}\">{{service.convertToDutch(item.value) || '0'}}%</span></p>\n    </div> -->\n</div>\n    <ng-container *ngIf=\"!isRoadTypeLoading; else elseTemplateSpin\">\n      <div class=\"getRide mt-4 mb-3\" >\n        <div class=\"border-boxes d-flex justify-content-center\" *ngFor=\"let item of showStackBar\" [ngClass]=\"item.class\">\n           {{item.speed || 'NA'}}: <span class=\"msg\" [ngStyle]=\"{'color': item?.color}\">{{service.convertToDutch(item.value) || '0'}}%</span>\n        </div>\n       \n    </div>\n   \n    <ng-container *ngIf=\"!noRoadTypeData; else elseTemplate2\">\n        <div class=\"roadFactor mt-3\">\n        <div fxLayout=\"row\" style=\"width: 100%; height: 15px;\">\n            <div class=\"border-radius\" *ngFor=\"let item of showStackBar\" fxFlex=\"{{item.value}}\"\n                [ngStyle]=\"{'background-color': item?.color}\"></div>\n        </div>\n    </div>\n\n    </ng-container>\n    <ng-template #elseTemplate2>\n        <div class=\"noDataMainBox\">\n            <div class=\"noData\"><img src=\"assets/images/nodata.png\"> </div>\n        </div>\n    </ng-template>\n    </ng-container>\n    <ng-template #elseTemplateSpin>\n      <mat-spinner style=\"margin: 0 auto;\" [diameter]='50'></mat-spinner>\n    </ng-template>\n</div>\n\n<div class=\"tripHistory mb-20\">\n    <div class=\"tripHisTop\">\n        <div class=\"tripHisTopLeft\">\n            <h4 class=\"tripTitle mb-0 mr-30\">{{\"t.tripHistory\" | translate}}</h4>\n            <span>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                        d=\"M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.18C2 19.83 4.17 22 7.81 22H16.18C19.82 22 21.99 19.83 21.99 16.19V7.81C22 4.17 19.83 2 16.19 2ZM8.64 12.81L13.02 8.43H10.59C10.18 8.43 9.84 8.09 9.84 7.68C9.84 7.27 10.18 6.93 10.59 6.93H14.83C14.93 6.93 15.02 6.95 15.12 6.99C15.3 7.07 15.45 7.21 15.53 7.4C15.57 7.49 15.59 7.59 15.59 7.69V11.93C15.59 12.34 15.25 12.68 14.84 12.68C14.43 12.68 14.09 12.34 14.09 11.93V9.5L9.7 13.87C9.55 14.02 9.36 14.09 9.17 14.09C8.98 14.09 8.79 14.02 8.64 13.87C8.35 13.58 8.35 13.1 8.64 12.81ZM18.24 17.22C16.23 17.89 14.12 18.23 12 18.23C9.88 18.23 7.77 17.89 5.76 17.22C5.37 17.09 5.16 16.66 5.29 16.27C5.42 15.88 5.84 15.66 6.24 15.8C9.96 17.04 14.05 17.04 17.77 15.8C18.16 15.67 18.59 15.88 18.72 16.27C18.84 16.67 18.63 17.09 18.24 17.22Z\"\n                        fill=\"#C5CDD4\" />\n                </svg>\n            </span>\n        </div>\n        <div class=\"tripHisTopLeft\">\n            <div class=\"\">\n                <mat-button-toggle-group class=\"historyButton\" [value]='tableView'\n                    (change)=\"toggleChange($event.value)\">\n                    <mat-button-toggle value=\"table\"> <svg width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\">\n                            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                d=\"M18.3332 5.29199C18.3332 5.63717 18.0534 5.91699 17.7082 5.91699H2.29151C1.94633 5.91699 1.6665 5.63717 1.6665 5.29199C1.6665 4.94681 1.94633 4.66699 2.29151 4.66699H17.7082C18.0534 4.66699 18.3332 4.94681 18.3332 5.29199Z\"\n                                fill=\"white\" />\n                            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                d=\"M18.3332 10.5003C18.3332 10.8455 18.0534 11.1253 17.7082 11.1253H2.2915C1.94633 11.1253 1.6665 10.8455 1.6665 10.5003C1.6665 10.1551 1.94633 9.87532 2.2915 9.87532H17.7082C18.0534 9.87532 18.3332 10.1551 18.3332 10.5003Z\"\n                                fill=\"white\" />\n                            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                d=\"M18.3332 15.7087C18.3332 16.0538 18.0534 16.3337 17.7082 16.3337H2.2915C1.94633 16.3337 1.6665 16.0538 1.6665 15.7087C1.6665 15.3635 1.94633 15.0837 2.2915 15.0837H17.7082C18.0534 15.0837 18.3332 15.3635 18.3332 15.7087Z\"\n                                fill=\"white\" />\n                        </svg>\n                    </mat-button-toggle>\n                    <mat-button-toggle value=\"map\">\n                        <svg width=\"20\" height=\"21\" version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\"\n                            xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 20 20\"\n                            style=\"enable-background:new 0 0 20 20;\" xml:space=\"preserve\">\n                            <style type=\"text/css\">\n                                .st0 {\n                                    fill: #C5CDD4;\n                                }\n                            </style>\n                            <g>\n                                <path class=\"st0\" d=\"M13,17.8c-0.4,0-0.7-0.1-1-0.2l-4.4-2.2c-0.3-0.1-0.8-0.1-1,0l-2,1.1C3.9,17,3,17.1,2.3,16.7\n                           c-0.7-0.4-1-1.2-1-2.1V6.5c0-0.7,0.5-1.6,1.1-2l3.6-2.1c0.6-0.3,1.5-0.4,2.1-0.1l4.4,2.2c0.3,0.1,0.8,0.1,1,0l2-1.1\n                           c0.8-0.5,1.7-0.5,2.4-0.2c0.7,0.4,1,1.2,1,2.1v8.1c0,0.7-0.5,1.6-1.1,2l-3.6,2.1C13.9,17.7,13.5,17.8,13,17.8z M7.2,14.1\n                           c0.4,0,0.7,0.1,1,0.2l4.4,2.2c0.3,0.1,0.8,0.1,1,0l3.6-2.1c0.3-0.2,0.5-0.6,0.5-0.9V5.4c0-0.5-0.2-0.9-0.4-1.1\n                           c-0.3-0.2-0.7-0.1-1.2,0.2l-2,1.1C13.6,5.9,12.7,6,12,5.7L7.7,3.5c-0.3-0.1-0.8-0.1-1,0L3,5.6C2.8,5.7,2.5,6.2,2.5,6.5v8.1\n                           c0,0.5,0.2,0.9,0.4,1.1c0.3,0.2,0.7,0.1,1.2-0.2l2-1.1C6.4,14.2,6.8,14.1,7.2,14.1z\" />\n                            </g>\n                            <g>\n                                <path class=\"st0\"\n                                    d=\"M7.1,14.8c-0.3,0-0.6-0.3-0.6-0.6V3.3c0-0.3,0.3-0.6,0.6-0.6S7.7,3,7.7,3.3v10.8C7.7,14.5,7.5,14.8,7.1,14.8z\" />\n                            </g>\n                            <g>\n                                <path class=\"st0\" d=\"M13.1,17.3c-0.3,0-0.6-0.3-0.6-0.6V5.5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v11.1\n                           C13.7,17,13.4,17.3,13.1,17.3z\" />\n                            </g>\n                        </svg>\n\n                    </mat-button-toggle>\n                </mat-button-toggle-group>\n            </div>\n        </div>\n    </div>\n    <div class=\"tripMainBox\" *ngIf=\"tableView=='table'\">\n        <ng-container *ngIf=\"isTripHistoryLoading; else elseTemplate\">\n            <mat-spinner style=\"margin: 0 auto;\" [diameter]='50'></mat-spinner>\n        </ng-container>\n        <ng-template #elseTemplate>\n            <app-trip-history [tableData]='tripHistory' [toolTipData]=\"tripToolTipData\"></app-trip-history>\n        </ng-template>\n    </div>\n    <div class=\"tripMap\" *ngIf=\"tableView=='map'\">\n        <ng-container *ngIf=\"isTripHistoryLoading; else elseTemplate1\">\n            <mat-spinner style=\"margin: 0 auto;\" [diameter]='50'></mat-spinner>\n        </ng-container>\n        <ng-template #elseTemplate1>\n            <app-trip-history-map [tableData]='tripHistory'></app-trip-history-map>\n        </ng-template>\n    </div>\n    <mat-paginator [length]=\"totalCount\" #paginator [pageSize]=\"limit\" (page)='pageChange($event)'\n        [showFirstLastButtons]=\"true\" [pageSizeOptions]=\"pageSizeOptions\">\n    </mat-paginator>\n</div>\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { MatAccordion } from '@angular/material/expansion';\nimport { ActivatedRoute } from '@angular/router';\nimport * as moment from 'moment';\nimport { LocalService } from 'src/app/services/local.service';\nimport { MainService } from 'src/app/services/main.service';\nimport { Chart, registerables } from 'chart.js';\nimport zoomPlugin from 'chartjs-plugin-zoom';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Inject } from '@angular/core';\nimport { AppConfig } from 'src/app/config/app-config';\nimport { TranslateService } from '@ngx-translate/core';\nimport ChartDataLabels from \"chartjs-plugin-datalabels\";\n\n@Component({\n  selector: \"app-trip-detail\",\n  templateUrl: \"./trip-detail.component.html\",\n  styleUrls: [\"./trip-detail.component.scss\"],\n})\nexport class TripDetailComponent implements OnInit {\n  @ViewChild(\"firstAccordion\") firstAccordion: MatAccordion;\n\n  tableView: string = \"table\";\n\n  tripId: string;\n  tripDetail: any = [];\n  singleAlertId: string;\n  // GUAGE CHART VARIABLES\n\n  hideToggle = false;\n  gaugeType = \"semi\";\n  thresholdConfig = AppConfig.gaugeThreshold;\n  //Ng Accordian\n  hideToggle1 = false;\n  displayMode: string = \"default\";\n  multi = true;\n  disabled = false;\n  mapAlerts: any = [];\n\n  // stacked bar variable\n\n  colorBox: any = [\"#ed502e\", \"#604EFF\", \"#FFEA6C\", \"#4dbfff\", \"#2A1E91\"];\n\n  stackBar = [\n    { value: 0, class: \"ridOfmax1\", speed: 0, color: \"\" },\n    { value: 0, class: \"busyRoad1\", speed: 0, color: \"\" },\n    { value: 0, class: \"quietRoad1\", speed: 0, color: \"\" },\n    { value: 0, class: \"buildUp1\", speed: 0, color: \"\" },\n    { value: 0, class: \"ridOfHighSpeed1\", speed: 0, color: \"\" },\n  ];\n\n  gaugeMin = AppConfig.gaugeMin;\n  gaugeMax = AppConfig.gaugeMax;\n\n  showStackBar: any = [];\n  noRoadTypeData: boolean = false;\n  selectedOrgID: any;\n  idling: any;\n  acceleration: any;\n  braking: any;\n  cornering: any;\n  speed: any;\n  speedProfile: any = { speed: [], limit: [], time: [] };\n  accProfile: any = { acc: [], deacc: [], time: [] };\n  alerts: any = {};\n\n  exceptionTypeObj = {\n    speed: \"Speeding\",\n    breaking: \"Braking\",\n    acceleration: \"Acceleration\",\n    cornering: \"Cornering\",\n    idling: \"Idiling\",\n  };\n  exceptionArray: any = {};\n  exceptionCount: number = 0;\n  exceptionKeys: any = [];\n  exceptionShowOnMap: boolean = true;\n\n  constructor(\n    public service: MainService,\n    private localService: LocalService,\n    private activeRoute: ActivatedRoute,\n    private elementRef: ElementRef,\n    public dialog: MatDialog,\n    private translate: TranslateService,\n  ) {\n    Chart.register(...registerables);\n  }\n  ngOnInit(): void {\n    this.localService.getLang().subscribe((val) => {\n      if (this.accProfile && this.accProfile.time) {\n        setTimeout(() => {\n          this.createAccProfileChart();\n        }, 200)\n      }\n      if (this.speedProfile && this.speedProfile.time) {\n        setTimeout(() => {\n          this.createSpeedProfileChart();\n        }, 200)\n      }\n      if (this.roadTypeData) {\n        this.newbarChart(this.roadTypeData, this.roadTypeLabel)\n      }\n    })\n    this.tripId = this.activeRoute.snapshot.queryParams.tripId;\n    this.selectedOrgID = this.localService.getItem(\"selectedOrgs\");\n    if (this.selectedOrgID) {\n      this.selectedOrgID = JSON.parse(this.selectedOrgID);\n    }\n    this.getAllAlerts();\n    this.getTripDetails();\n    this.getRoadTypeDistribution();\n    this.getTripException();\n    // this.getDayNightScore();\n  }\n\n  ngAfterContentInit() { }\n  dayNightScore = { dayScore: [], nightScore: [], date: [] };\n  getDayNightScore() {\n    this.dayNightScore = { dayScore: [], nightScore: [], date: [] };\n    const date = [\n      \"01/03\",\n      \"02/03\",\n      \"03/03\",\n      \"04/03\",\n      \"05/03\",\n      \"06/03\",\n      \"07/03\",\n      \"08/03\",\n      \"09/03\",\n      \"10/03\",\n      \"11/03\",\n      \"12/03\",\n      \"13/03\",\n      \"14/03\",\n      \"15/03\",\n      \"16/03\",\n      \"17/03\",\n      \"18/03\",\n      \"19/03\",\n      \"20/03\",\n      \"21/03\",\n      \"22/03\",\n      \"23/03\",\n      \"24/03\",\n      \"25/03\",\n      \"26/03\",\n      \"27/03\",\n      \"28/03\",\n      \"29/03\",\n      \"30/03\",\n      \"31/03\"\n    ];\n    const dayScore = [\n      \"6.7\",\n      \"6.0\",\n      \"6.9\",\n      \"6.5\",\n      \"4.5\",\n      \"4.5\",\n      \"3.8\",\n      \"5.0\",\n      \"4.9\",\n      \"5.7\",\n      \"4.4\",\n      \"4.9\",\n      \"5.3\",\n      \"5.6\",\n      \"5.5\",\n      \"4.9\",\n      \"3.8\",\n      \"6.0\",\n      \"4.6\",\n      \"6.8\",\n      \"5.0\",\n      \"4.0\",\n      \"5.5\",\n      \"4.3\",\n      \"5.4\",\n      \"4.2\",\n      \"5.4\",\n      \"5.3\",\n      \"5.5\",\n      \"4.3\",\n      \"5.6\"\n    ];\n    const nightScore = [\n      \"5.6\",\n      \"5.6\",\n      \"6.5\",\n      \"6.4\",\n      \"2.1\",\n      \"3.5\",\n      \"4.7\",\n      \"3.1\",\n      \"4.5\",\n      \"5.3\",\n      \"3.3\",\n      \"3.3\",\n      \"2.8\",\n      \"6.4\",\n      \"6.1\",\n      \"3.6\",\n      \"6.1\",\n      \"4.1\",\n      \"6.2\",\n      \"3.3\",\n      \"6.4\",\n      \"7.2\",\n      \"3.4\",\n      \"6.1\",\n      \"7.9\",\n      \"5.5\",\n      \"5.0\",\n      \"4.4\"\n    ]\n    this.lineChartScore(\n      date,\n      dayScore,\n      nightScore,\n      \"Day Night\"\n    );\n    // let querryParams = this.createQuerryparams();\n    // this.service\n    //   .get(`dashboard/day-night-score?${querryParams}&is_day_trip=[true,false]`)\n    //   .pipe()\n    //   .subscribe(\n    //     (res: any) => {\n    //       res.data.forEach((element: any) => {\n    //         if (element.is_day_trip) {\n    //           this.dayNightScore.date.push(\n    //             moment.utc(element.start_date_time).format(\"DD/MM\")\n    //           );\n    //           if (!this.naValue.includes(element?.safe_score)) {\n    //             this.dayNightScore.dayScore.push(element?.safe_score);\n    //           } else {\n    //             this.dayNightScore.dayScore.push(null);\n    //           }\n    //         } else {\n    //           if (!this.naValue.includes(element?.safe_score)) {\n    //             this.dayNightScore.nightScore.push(element?.safe_score);\n    //           } else {\n    //             this.dayNightScore.nightScore.push(null);\n    //           }\n    //         }\n    //       });\n    //       this.dayNightScore.date.reverse();\n    //       this.dayNightScore.dayScore.reverse();\n    //       this.dayNightScore.nightScore.reverse();\n    //       // console.log(this.dayNightScore);\n    //       this.lineChartScore(\n    //         this.dayNightScore.date,\n    //         this.dayNightScore.dayScore,\n    //         this.dayNightScore.nightScore,\n    //         \"Day Night\"\n    //       );\n    //     },\n    //     (err) => { }\n    //   );\n  }\n  linemyChartScore: any;\n  lineChartScore(label, point, pointsSecond, name) {\n    if (this.linemyChartScore) {\n      this.linemyChartScore.destroy();\n    }\n    var labels = label;\n\n    const datapoints = point;\n    let dayDrive;\n    this.translate.get(\"daydriving\").subscribe((text: string) => {\n      dayDrive = text;\n    });\n    let nightDrive;\n    this.translate.get(\"nightdriving\").subscribe((text: string) => {\n      nightDrive = text;\n    });\n\n    let htmlRef =\n      this.elementRef.nativeElement.querySelector(`#lineChartScore`);\n    const gradient = this.elementRef.nativeElement\n      .querySelector(`#lineChartScore`)\n      .getContext(\"2d\")\n      .createLinearGradient(0, 0, 0, 400);\n    gradient.addColorStop(0, \"rgba(255, 112, 112, 0.05)\");\n    gradient.addColorStop(1, \"rgba(255, 112, 112, 0.11)\");\n    const dataSet: any = [\n      {\n        data: pointsSecond,\n        borderColor: \"#939EAA\",\n        pointBackgroundColor: \"#FA1464\",\n        borderWidth: 3.84,\n        fill: false,\n        cubicInterpolationMode: \"monotone\",\n        tension: 0.4,\n        backgroundColor: gradient,\n        label: nightDrive,\n      },\n      {\n        data: point,\n        borderColor: \"#001E50\",\n        pointBackgroundColor: \"#FA1464\",\n        borderWidth: 3.84,\n        fill: false,\n        cubicInterpolationMode: \"monotone\",\n        tension: 0.4,\n        backgroundColor: gradient,\n        label: dayDrive,\n      },\n    ];\n    // if (!this.safeScoreCheckboxsecond) {\n    //   dataSet.splice(1, 1);\n    // }\n    // if (!this.otherCheckboxsecond) {\n    //   dataSet.splice(0, 1);\n    // }\n\n    // console.log(dataSet);\n\n    this.linemyChartScore = new Chart(htmlRef, {\n      type: \"line\",\n      data: {\n        labels: labels,\n        datasets: dataSet,\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        elements: {\n          point: {\n            radius: 0,\n          },\n        },\n        plugins: {\n          legend: {\n            display: false,\n          },\n          tooltip: {\n            enabled: true,\n            backgroundColor: \"#ffffff\",\n            titleAlign: \"center\",\n            footerAlign: \"center\",\n            bodyAlign: \"center\",\n            titleColor: \"#1B194B\",\n            displayColors: false,\n            callbacks: {\n              labelTextColor: (context) => {\n                return \"#1B194B\";\n              },\n            },\n          },\n        },\n        interaction: {\n          intersect: false,\n        },\n        scales: {\n          x: {\n            display: true,\n          },\n          y: {\n            display: true,\n            // min: -10,\n            max: AppConfig.gaugeMax,\n            ticks: {\n              precision: 0,\n              // stepSize: 10,\n              // callback: (value, index, values) => {\n              //   return (index == (values.length-1)) ?  undefined :  value\n              // }\n            },\n          },\n        },\n      },\n    });\n  }\n\n  getTripDetails() {\n    this.service.get(`trips/${this.tripId}`).pipe().subscribe(response => {\n      if (response && response.data) {\n        this.tripDetail = response.data;\n        this.getSpeedProfileData();\n        this.getAccelerationProfileData();\n        if (this.tripDetail) {\n          this.idling = this.tripDetail.idling_score;\n          this.acceleration = this.tripDetail.acceleration_score;\n          this.braking = this.tripDetail.breaking_score;\n          this.cornering = this.tripDetail.cornering_score;\n          this.speed = this.tripDetail.speed_score;\n          document.getElementById('top').scrollIntoView({ behavior: 'smooth' });\n        }\n      }\n    }, (error) => {\n      document.getElementById('top').scrollIntoView({ behavior: 'smooth' });\n    })\n  }\n  roadTypeLabel = []\n  roadTypeData = []\n  id;\n\n  data = []\n  label = []\n  type;\n  yLabel: string;\n  text: string;\n\n  getRoadTypeDistribution() {\n\n    this.service\n      .get(\n        `trips/road-type-distribution?organisation=${JSON.stringify(\n          this.selectedOrgID\n        )}&trip=[${this.tripId}]&custom_filter=true&filter_value=false`\n      )\n      .pipe()\n      .subscribe(\n        (response) => {\n          this.roadTypeLabel = []\n          this.roadTypeData = []\n          if (response.data && response.data.length) {\n            for (let i = 0; i < response.data.length; i++) {\n              if (this.stackBar[i]) {\n                this.stackBar[i].value =\n                  response.data[i].contribution_value.toFixed(1);\n                this.stackBar[i].speed = response.data[i].road_factor_name;\n                this.stackBar[i].color = this.colorBox[i];\n              }\n            }\n            this.stackBar.forEach((x) => {\n              if (x.value > 0) {\n                this.roadTypeLabel.push((x.speed))\n                this.roadTypeData.push(x.value)\n              }\n            });\n            this.newbarChart(this.roadTypeData, this.roadTypeLabel)\n          } else {\n            this.noRoadTypeData = true;\n          }\n        },\n        (error) => {\n          this.roadTypeLabel = []\n          this.roadTypeData = []\n          this.noRoadTypeData = true;\n        }\n      );\n  }\n  barchartdata;\n  newbarChart(data, label) {\n\n    this.translate.get(\"ratio\").subscribe((text: string) => {\n      this.yLabel = text + ' %';\n    });\n    this.text = '';\n    \n    this.translate.get(\"kmph\").subscribe((text: string) => {\n      label = label.map((x) => {\n        x = x.split(' ')[0] + ' ' + text\n        return x;\n      })\n    });\n\n\n    let htmlRef = this.elementRef.nativeElement.querySelector(`#roadType`);\n    if (this.barchartdata) this.barchartdata.destroy();\n\n    let _this = this;\n    this.barchartdata = new Chart(htmlRef, {\n      type: \"bar\",\n      data: {\n        labels: label || [\n          \"81 - 100+ kmph\",\n          \"71 - 80 kmph\",\n          \"50 - 70 kmph\",\n          \"00 - 30 kmph\",\n        ],\n        datasets: [\n          {\n            label: this.text,\n            data: data || [20, 30, 25, 54, 24],\n            backgroundColor: [\n              \"#46E18C\",\n              \"#46E18C\",\n              \"#46E18C\",\n              \"#46E18C\",\n              \"#46E18C\",\n            ],\n\n          },\n        ],\n\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false,\n            position: \"top\",\n          },\n          title: {\n            display: false,\n          },\n          datalabels: {\n            font: {\n              size: 10,\n              family: 'ModernEra_Bold',\n            },\n            anchor: 'end',\n            align: 'end',\n            color: '#001E50',\n            formatter: function (value, context) {\n              return _this.service.convertToDutch(value);\n            }\n          }\n        },\n        scales: {\n          x: {\n            display: true,\n            grid: {\n              drawOnChartArea: false\n            },\n            ticks: {\n              color: '#001E50',\n              font: {\n                size: 10,\n                family: 'ModernEra_Bold',\n                weight: '700'\n              }\n            }\n          },\n          y: {\n            beginAtZero: true,\n            ticks: {\n              callback: function (value, index, values) {\n                return Math.round(Number(value));\n              },\n              color: '#001E50',\n              font: {\n                size: 10,\n                family: 'ModernEra_Bold',\n                weight: '700'\n              }\n            },\n            title: {\n              display: true,\n              text: this.yLabel,\n              color: '#667280',\n              font: {\n                size: 10,\n                family: 'ModernEra',\n                weight: '700'\n              }\n            },\n            grid: {\n              drawOnChartArea: false\n            },\n            max: Math.max(...data) * 1.1,\n          }\n\n        },\n      },\n      plugins: [ChartDataLabels],\n    });\n  }\n\n  dateTimeFormat(dateTime) {\n    if (dateTime) return moment(dateTime).utc().format(\"HH:mm D/MM/yyyy\");\n    else return \"NA\";\n  }\n\n  getSpeedProfileData() {\n    // let isCustom = true;\n    // if ((this.tripDetail.provider).trim() == \"GEOTAB\") {\n    //   isCustom = false;\n    // &isCustom=${isCustom}\n    // }\n    this.service\n      .get(`trips/trip-telematic-record/${this.tripId}?type=1`)\n      .pipe()\n      .subscribe(\n        (response) => {\n          if (response.data && response.data.length) {\n            response.data.forEach((element) => {\n              this.speedProfile[\"speed\"].push(+element.property_value);\n              this.speedProfile[\"limit\"].push(+element.waypoint.road_speed);\n              this.speedProfile[\"time\"].push(\n                moment(element.timestamp).utc().format(\"D/MM, HH:mm:ss\")\n              );\n            });\n          } else {\n            this.speedProfile = { speed: [], limit: [], time: [] };\n          }\n          this.createSpeedProfileChart();\n        },\n        (error) => {\n          this.speedProfile = { speed: [], limit: [], time: [] };\n        }\n      );\n  }\n\n  getAccelerationProfileData() {\n    let isCustom = true;\n    if ((this.tripDetail.provider).trim() == \"GEOTAB\") {\n      isCustom = false;\n    }\n    this.service\n      .get(`trips/trip-telematic-record/${this.tripId}?type=2&isCustom=${isCustom}`)\n      .pipe()\n      .subscribe(\n        (response) => {\n          if (response.data && response.data.length) {\n            response.data.forEach((element) => {\n              if (element.property_id == \"AccelerationID\") {\n                this.accProfile[\"acc\"].push(+element.property_value);\n                this.accProfile[\"deacc\"].push(\"\");\n              } else {\n                this.accProfile[\"acc\"].push(\"\");\n                this.accProfile[\"deacc\"].push(+element.property_value);\n              }\n              this.accProfile[\"time\"].push(\n                moment(element.timestamp).utc().format(\"D/MM,HH:mm:ss\")\n              );\n            });\n          } else {\n            this.accProfile = { acc: [], deacc: [], time: [] };\n          }\n          this.createAccProfileChart();\n        },\n        (error) => {\n          this.accProfile = { acc: [], deacc: [], time: [] };\n        }\n      );\n  }\n\n  speedChart;\n  createSpeedProfileChart() {\n    if (this.speedChart) {\n      this.speedChart.destroy();\n    }\n    const labels = this.speedProfile['time'];\n    var speed;\n    var limit;\n\n    this.translate.get(\"speed\").subscribe((text: string) => {\n      speed = text\n    });\n    this.translate.get(\"limit\").subscribe((text: string) => {\n      limit = text\n    });\n    let htmlRef = this.elementRef.nativeElement.querySelector(`#myChart`);\n    const gradient = this.elementRef.nativeElement\n      .querySelector(`#myChart`)\n      .getContext(\"2d\")\n      .createLinearGradient(0, 0, 0, 600);\n    gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n    gradient.addColorStop(0, \"rgba(0, 122, 255, 0.33)\");\n    var dataset1 = this.speedProfile[\"speed\"];\n    var dataset2 = this.speedProfile[\"limit\"];\n    const up = (ctx, value) => {\n      if (dataset1[ctx.p0DataIndex] > dataset2[ctx.p0DataIndex]) {\n        return \"#FA1464\"\n      }\n      else {\n        return \"#001E50\"\n      }\n    }\n    this.speedChart = new Chart(htmlRef, {\n      type: \"line\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: `${speed} km/h`,\n            data: this.speedProfile['speed'],\n            borderColor: '#001E50',\n            cubicInterpolationMode: 'monotone',\n            tension: 0.4,\n            fill: 'start',\n            backgroundColor: gradient\n          },\n          {\n            label: limit,\n            data: this.speedProfile['limit'],\n            borderColor: \"#939EAA\",\n            stepped: true\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        plugins: {\n          title: {\n            display: false,\n            text: \"Stacked scales\",\n          },\n          legend: {\n            display: false,\n            labels: {\n              usePointStyle: true,\n            },\n          },\n\n          tooltip: {\n            mode: \"nearest\",\n            axis: \"x\",\n            intersect: true,\n            enabled: true,\n            backgroundColor: \"#ffffff\",\n            titleAlign: \"center\",\n            footerAlign: \"center\",\n            bodyAlign: \"center\",\n            titleColor: \"#1B194B\",\n            displayColors: false,\n            callbacks: {\n              labelTextColor: (context) => {\n                return \"#1B194B\";\n              },\n            },\n          },\n        },\n        scales: {\n          y: {\n            type: \"linear\",\n            position: \"left\",\n            stack: \"demo\",\n            stackWeight: 2,\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n          x: {\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n        },\n      },\n    });\n\n\n  }\n\n  accChart;\n  createAccProfileChart() {\n    if (this.accChart) {\n      this.accChart.destroy();\n    }\n    var labels = this.accProfile['time'];\n    var breakingprofile;\n    var accelerationprofile;\n\n    this.translate.get(\"breakingprofile\").subscribe((text: string) => {\n      breakingprofile = text\n    });\n    this.translate.get(\"accelerationprofile\").subscribe((text: string) => {\n      accelerationprofile = text\n    });\n    let htmlRef = this.elementRef.nativeElement.querySelector(`#myChartAcc`);\n    const gradient = this.elementRef.nativeElement\n      .querySelector(`#myChartAcc`)\n      .getContext(\"2d\")\n      .createLinearGradient(0, 0, 0, 600);\n    gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n    gradient.addColorStop(0, \"rgba(0, 122, 255, 0.33)\");\n    this.accChart = new Chart(htmlRef, {\n      type: \"line\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: `${accelerationprofile}`,\n            data: this.accProfile['acc'],\n            borderColor: '#001E50',\n            // stepped: true\n          },\n          {\n            label: `${breakingprofile}`,\n            data: this.accProfile['deacc'],\n            borderColor: \"#939EAA\",\n            // stepped: true,\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        plugins: {\n          title: {\n            display: false,\n            text: \"Stacked scales\",\n          },\n          legend: {\n            display: false,\n            labels: {\n              usePointStyle: true,\n            },\n          },\n          tooltip: {\n            mode: \"nearest\",\n            axis: \"x\",\n            intersect: false,\n            enabled: true,\n            backgroundColor: \"#ffffff\",\n            titleAlign: \"center\",\n            footerAlign: \"center\",\n            bodyAlign: \"center\",\n            titleColor: \"#1B194B\",\n            displayColors: false,\n            callbacks: {\n              labelTextColor: (context) => {\n                return \"#1B194B\";\n              },\n            },\n          },\n        },\n        scales: {\n          x: {\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n          y: {\n            position: \"left\",\n            stack: \"demo\",\n            stackWeight: 2,\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n        },\n      },\n    });\n  }\n\n  openChartPopup(chartData, type) {\n    let chart = { chartData: chartData, type: type };\n    const dialogRef = this.dialog.open(DialogContentExampleDialog, {\n      disableClose: true,\n      panelClass: \"custom-dialog-container\",\n      height: \"auto\",\n      width: \"80%\",\n      data: chart,\n    });\n\n    dialogRef.afterClosed().subscribe((result) => {\n\n    });\n  }\n\n  getTripException() {\n    this.exceptionCount = 0;\n    this.exceptionArray = {};\n    this.exceptionKeys = [];\n    this.service\n      .get(`trips/${this.tripId}/exceptions`)\n      .pipe()\n      .subscribe(\n        (response) => {\n          if (response.data) {\n            for (let key in response.data) {\n              if (response.data[key] && response.data[key].length > 0) {\n                this.exceptionKeys.push(key);\n                this.exceptionArray[key] = response.data[key];\n                this.exceptionArray[key].total_time = 0;\n                this.exceptionArray[key].distance = 0;\n                this.exceptionCount =\n                  this.exceptionCount + response.data[key].length;\n                response.data[key].forEach((element) => {\n                  this.exceptionArray[key].total_time =\n                    this.exceptionArray[key].total_time +\n                    Number(element.duration_seconds);\n                  this.exceptionArray[key].distance =\n                    this.exceptionArray[key].distance +\n                    parseFloat(element.distance);\n                });\n              }\n            }\n          } else {\n            this.exceptionArray = {};\n          }\n        },\n        (error) => {\n          this.exceptionArray = {};\n        }\n      );\n  }\n\n  toggleChange(value) {\n    this.tableView = value;\n    if (this.tableView == \"map\") {\n      this.exceptionShowOnMap = true;\n    } else {\n      this.exceptionShowOnMap = false;\n    }\n  }\n\n  goToLastPage() {\n    window.history.back();\n  }\n\n  formatToFixed(val, precision) {\n    if (typeof val == \"string\") {\n      val = parseFloat(val);\n    }\n    if (val) {\n      return val.toFixed(precision);\n    }\n    return 0;\n  }\n\n  getAllAlerts() {\n    const arr = [];\n    arr.push(this.tripId);\n    const data = {\n      tripId: arr,\n    };\n    this.service\n      .post(`trips/alerts`, data)\n      .pipe()\n      .subscribe(\n        (response) => {\n          if (response.data) {\n            for (const k in response.data) {\n              this.mapAlerts = response.data[k];\n            }\n          }\n        },\n        (error) => { }\n      );\n  }\n\n  calcTime(stopTime, startTime) {\n    if (startTime && stopTime) {\n      let duration = moment.duration(moment(stopTime).diff(moment(startTime)));\n      return moment.utc(duration.as(\"milliseconds\")).format(\"HH[h] mm[m]\");\n    }\n  }\n\n  singleExceptionShow(obj) {\n    this.exceptionShowOnMap = false;\n    this.singleAlertId = obj.id;\n  }\n}\n\n@Component({\n  selector: \"dialog-content-example-dialog\",\n  templateUrl: \"./chart-data.html\",\n  styleUrls: [\"./trip-detail.component.scss\"],\n})\nexport class DialogContentExampleDialog {\n  graphData: any;\n  constructor(\n    public dialogRef: MatDialogRef<DialogContentExampleDialog>,\n    private elementRef: ElementRef,\n    private translate: TranslateService,\n    @Inject(MAT_DIALOG_DATA) public data,\n  ) {\n    Chart.register(...registerables);\n    Chart.register(zoomPlugin);\n    setTimeout(() => {\n      if (this.data.type == 1) {\n        this.createSpeedProfileChart(this.data.chartData);\n      } else {\n        this.createAccProfileChart(this.data.chartData);\n      }\n    }, 200);\n  }\n  myChart;\n  createSpeedProfileChart(data) {\n    const labels = data['time'];\n    var speed;\n    var limit;\n\n    this.translate.get(\"speed\").subscribe((text: string) => {\n      speed = text\n    });\n    this.translate.get(\"limit\").subscribe((text: string) => {\n      limit = text\n    });\n    let htmlRef = this.elementRef.nativeElement.querySelector(`#popupChart`);\n    const gradient = this.elementRef.nativeElement\n      .querySelector(`#popupChart`)\n      .getContext(\"2d\")\n      .createLinearGradient(0, 0, 0, 600);\n    var dataset1 = data[\"speed\"];\n    var dataset2 = data[\"limit\"];\n    const up = (ctx, value) => {\n      if (dataset1[ctx.p0DataIndex] > dataset2[ctx.p0DataIndex]) {\n        return \"#FA1464\"\n      }\n      else {\n        return \"#001E50\"\n      }\n    }\n    gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n    gradient.addColorStop(0, \"rgba(0, 122, 255, 0.33)\");\n    const dataSet: any = [\n      {\n        label: \"Limit\",\n        data: data[\"limit\"],\n        borderColor: \"#939EAA\",\n        stepped: true,\n      },\n      {\n        label: \"Speed km/h\",\n        data: data[\"speed\"],\n        borderColor: '#001E50',\n        cubicInterpolationMode: \"monotone\",\n        tension: 0.4,\n        fill: \"start\",\n        backgroundColor: gradient,\n        segment: {\n          borderColor: ctx => up(ctx, 'rgb(0,0,0,0.2)'),\n        }\n      },\n\n    ];\n    if (!this.safeScoreCheckbox) {\n      dataSet.splice(1, 1);\n    }\n    if (!this.otherCheckbox) {\n      dataSet.splice(0, 1);\n    }\n\n    this.myChart = new Chart(htmlRef, {\n      type: \"line\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: `${speed} km/h`,\n            data: data['speed'],\n            borderColor: '#001E50',\n            cubicInterpolationMode: 'monotone',\n            tension: 0.4,\n            fill: 'start',\n            backgroundColor: gradient\n          },\n          {\n            label: limit,\n            data: data['limit'],\n            borderColor: \"#939EAA\",\n            stepped: true\n          }\n        ]\n      },\n      options: {\n        // responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          title: {\n            display: false,\n            text: \"Stacked scales\",\n          },\n          legend: {\n            labels: {\n              usePointStyle: true,\n            },\n            display: false\n          },\n          tooltip: {\n            mode: \"nearest\",\n            axis: \"x\",\n            intersect: false,\n            enabled: true,\n            backgroundColor: \"#ffffff\",\n            titleAlign: \"center\",\n            footerAlign: \"center\",\n            bodyAlign: \"center\",\n            titleColor: \"#1B194B\",\n            displayColors: false,\n            callbacks: {\n              labelTextColor: (context) => {\n                return \"#1B194B\";\n              },\n            },\n          },\n          zoom: {\n            zoom: {\n              wheel: {\n                enabled: true,\n              },\n              pinch: {\n                enabled: true,\n              },\n              drag: {\n                enabled: true,\n              },\n              mode: \"x\",\n            },\n          },\n        },\n        scales: {\n          y: {\n            type: \"linear\",\n            position: \"left\",\n            stack: \"demo\",\n            stackWeight: 2,\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n          x: {\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n        },\n      },\n    });\n  }\n\n  createAccProfileChart(data) {\n    var labels = data['time'];\n    var breakingprofile;\n    var accelerationprofile;\n    this.translate.get(\"breakingprofile\").subscribe((text: string) => {\n      breakingprofile = text\n    });\n    this.translate.get(\"accelerationprofile\").subscribe((text: string) => {\n      accelerationprofile = text\n    });\n    let htmlRef = this.elementRef.nativeElement.querySelector(`#popupChart`);\n    const gradient = this.elementRef.nativeElement\n      .querySelector(`#popupChart`)\n      .getContext(\"2d\")\n      .createLinearGradient(0, 0, 0, 600);\n    gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n    gradient.addColorStop(0, \"rgba(0, 122, 255, 0.33)\");\n    const dataSet: any = [\n      {\n        label: \"Braking Profile\",\n        data: data[\"deacc\"],\n        borderColor: \"#939EAA\",\n        cubicInterpolationMode: \"monotone\",\n        tension: 0.4,\n      },\n      {\n        label: \"Acceleration profile\",\n        data: data[\"acc\"],\n        borderColor: \"#001E50\",\n        cubicInterpolationMode: \"monotone\",\n        tension: 0.4,\n      },\n\n    ];\n    if (!this.safeScoreCheckbox) {\n      dataSet.splice(1, 1);\n    }\n    if (!this.otherCheckbox) {\n      dataSet.splice(0, 1);\n    }\n    this.myChart = new Chart(htmlRef, {\n      type: \"line\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: accelerationprofile,\n            data: data['acc'],\n            borderColor: \"#001E50\",\n            // stepped: true\n          },\n          {\n            label: breakingprofile,\n            data: data['deacc'],\n            borderColor: \"#939EAA\",\n            // stepped: true,\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          title: {\n            display: false,\n            text: \"Stacked scales\",\n          },\n          legend: {\n            labels: {\n              usePointStyle: true,\n            },\n            display: false\n          },\n          tooltip: {\n            mode: \"nearest\",\n            axis: \"x\",\n            intersect: false,\n            enabled: true,\n            backgroundColor: \"#ffffff\",\n            titleAlign: \"center\",\n            footerAlign: \"center\",\n            bodyAlign: \"center\",\n            titleColor: \"#1B194B\",\n            displayColors: false,\n            callbacks: {\n              labelTextColor: (context) => {\n                return \"#1B194B\";\n              },\n            },\n          },\n          zoom: {\n            zoom: {\n              wheel: {\n                enabled: true,\n              },\n              pinch: {\n                enabled: true,\n              },\n              drag: {\n                enabled: true,\n              },\n              mode: \"x\",\n            },\n          },\n        },\n        scales: {\n          x: {\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n          y: {\n            position: \"left\",\n            stack: \"demo\",\n            stackWeight: 2,\n            grid: {\n              color: \"rgba(0, 0, 0, 0)\",\n            },\n          },\n        },\n      },\n    });\n  }\n\n  resetZoom() {\n    this.myChart.resetZoom();\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n  safeScoreCheckbox = true;\n  otherCheckbox = true;\n  changecheckboxValue(num) {\n    if (num == 1) {\n      this.safeScoreCheckbox = !this.safeScoreCheckbox;\n    } else {\n      this.otherCheckbox = !this.otherCheckbox;\n    }\n\n    if (this.data.type == 1) {\n      this.createSpeedProfileChart(this.data.chartData);\n    } else {\n      this.createAccProfileChart(this.data.chartData);\n    }\n\n    // if (this.title == \"Speed score\") {\n    //   this.lineChart(this.chartData.date, this.chartData.speed, this.title);\n    // } else if (this.title == \"Acceleration score\") {\n    //   this.lineChart(this.chartData.date, this.chartData.acc, this.title);\n    // } else if (this.title == \"Braking score\") {\n    //   this.lineChart(this.chartData.date, this.chartData.braking, this.title);\n    // } else if (this.title == \"Cornering score\") {\n    //   this.lineChart(this.chartData.date, this.chartData.cornering, this.title);\n    // } else {\n    //   this.lineChart(this.chartData.date, this.chartData.idiling, this.title);\n    // }\n  }\n}\n","<div class=\"titleWithBack \" id='top'>\n    <span class=\"backBtnImg cursor\" (click)=\"goToLastPage()\"><img src=\"assets/images/backButton.png\"></span>\n    <h4 class=\"BackTitle\">{{\"t.tripDetailInfo\" | translate}}</h4>\n</div>\n<div class=\"detailPageTrip\">\n    <div class=\"tripDetailsLeft\">\n        <div class=\"maintopBox \">\n            <div class=\"tripdetailBox \">\n                <div class=\"tripDetails\">\n                    <div class=\"tripDetailTopBox relBox\">\n                        <div class=\"tripDetailBox\">\n                            <ul>\n                                <li>\n                                    <svg width=\"24\" height=\"24\" version=\"1.1\" id=\"Layer_1\"\n                                        xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                                        x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\"\n                                        xml:space=\"preserve\">\n                                        <style type=\"text/css\">\n                                            .st0 {\n                                                fill: #001E50;\n                                            }\n                                        </style>\n                                        <g>\n                                            <path class=\"st0\" d=\"M12,20.2c-4.5,0-8.2-3.7-8.2-8.2S7.5,3.8,12,3.8s8.2,3.7,8.2,8.2S16.5,20.2,12,20.2z M12,5.2\n\t\tc-3.7,0-6.8,3-6.8,6.8c0,3.7,3,6.8,6.8,6.8c3.7,0,6.8-3,6.8-6.8C18.8,8.3,15.7,5.2,12,5.2z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\" d=\"M12,15.8c-2.1,0-3.8-1.7-3.8-3.8c0-2.1,1.7-3.8,3.8-3.8c2.1,0,3.8,1.7,3.8,3.8C15.8,14.1,14.1,15.8,12,15.8z\n\t\t M12,9.8c-1.2,0-2.2,1-2.2,2.2c0,1.2,1,2.2,2.2,2.2c1.2,0,2.2-1,2.2-2.2C14.2,10.8,13.2,9.8,12,9.8z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M12,4.8c-0.4,0-0.8-0.3-0.8-0.8V2c0-0.4,0.3-0.8,0.8-0.8s0.8,0.3,0.8,0.8v2C12.8,4.4,12.4,4.8,12,4.8z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M4,12.8H2c-0.4,0-0.8-0.3-0.8-0.8s0.3-0.8,0.8-0.8h2c0.4,0,0.8,0.3,0.8,0.8S4.4,12.8,4,12.8z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M12,22.8c-0.4,0-0.8-0.3-0.8-0.8v-2c0-0.4,0.3-0.8,0.8-0.8s0.8,0.3,0.8,0.8v2C12.8,22.4,12.4,22.8,12,22.8z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M22,12.8h-2c-0.4,0-0.8-0.3-0.8-0.8s0.3-0.8,0.8-0.8h2c0.4,0,0.8,0.3,0.8,0.8S22.4,12.8,22,12.8z\" />\n                                        </g>\n                                    </svg>\n\n                                    <div class=\"d-flex mt3\">\n                                        <p class=\"fromTitle fromTo mb-0\">{{\"from\" | translate}}: </p>\n                                        <div class=\"\">\n                                            <p class=\"mb-0 fromTitle\">&nbsp; {{tripDetail?.start_location_address ||\n                                                'NA'}}</p>\n                                            <p class=\"mb-0 timeDesc\">&nbsp; {{\"startedAt\" | translate}}:\n                                                {{dateTimeFormat(tripDetail?.start_date_time)}}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </li>\n                                <li>\n\n                                    <svg width=\"24\" height=\"24\" version=\"1.1\" id=\"Layer_1\"\n                                        xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                                        x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\"\n                                        xml:space=\"preserve\">\n                                        <style type=\"text/css\">\n                                            .st0 {\n                                                fill: #604EFF;\n                                            }\n                                        </style>\n                                        <g>\n                                            <path class=\"st0\" d=\"M12,22.8c-1.5,0-3-0.6-4.1-1.7c-2.9-2.8-6.2-7.4-5-12.8v0C4,3.4,8.3,1.2,12,1.2c0,0,0,0,0,0\n\t\tc3.7,0,8,2.2,9.1,7.1c1.2,5.4-2,9.9-5,12.7C15,22.2,13.5,22.8,12,22.8z M4.4,8.7C3.3,13.4,6.2,17.4,8.9,20c1.7,1.7,4.4,1.7,6.2,0\n\t\tc2.7-2.6,5.6-6.6,4.6-11.3c-1-4.4-4.7-5.9-7.6-5.9c0,0,0,0,0,0C9.1,2.8,5.3,4.3,4.4,8.7L4.4,8.7z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\" d=\"M10.8,13.8c-0.2,0-0.4-0.1-0.5-0.2L8.7,12c-0.3-0.3-0.3-0.8,0-1.1s0.8-0.3,1.1,0l1,1l3.5-3.5\n\t\tc0.3-0.3,0.8-0.3,1.1,0s0.3,0.8,0,1.1l-4,4C11.1,13.7,10.9,13.8,10.8,13.8z\" />\n                                        </g>\n                                    </svg>\n\n                                    <div class=\"d-flex  mt3\">\n                                        <p class=\"fromTitle fromTo mb-0\">{{\"to\" | translate}}: </p>\n                                        <div class=\"\">\n                                            <p class=\"mb-0 fromTitle\">&nbsp; {{tripDetail?.stop_location_address ||\n                                                'NA'}}</p>\n                                            <p class=\"mb-0 timeDesc\">&nbsp; {{\"endedAt\" | translate}}:\n                                                {{dateTimeFormat(tripDetail?.stop_date_time)}}</p>\n\n                                            <div class=\"timeDistBox mt-14\">\n                                                <svg width=\"18\" height=\"18\" viewBox=\"0 0 12 12\" fill=\"none\"\n                                                    xmlns=\"http://www.w3.org/2000/svg\">\n                                                    <path\n                                                        d=\"M6 1C3.245 1 1 3.245 1 6C1 8.755 3.245 11 6 11C8.755 11 11 8.755 11 6C11 3.245 8.755 1 6 1ZM8.175 7.785C8.105 7.905 7.98 7.97 7.85 7.97C7.785 7.97 7.72 7.955 7.66 7.915L6.11 6.99C5.725 6.76 5.44 6.255 5.44 5.81V3.76C5.44 3.555 5.61 3.385 5.815 3.385C6.02 3.385 6.19 3.555 6.19 3.76V5.81C6.19 5.99 6.34 6.255 6.495 6.345L8.045 7.27C8.225 7.375 8.285 7.605 8.175 7.785Z\"\n                                                        fill=\"#474F5A\" />\n                                                </svg>\n                                                {{\"t.totalTime\" | translate}}: <span class=\"timeDistTitle\">{{calcTime(tripDetail?.stop_date_time,\n                                                    tripDetail?.start_date_time)}}</span>\n                                            </div>\n                                            <div class=\"timeDistBox\">\n                                                <svg width=\"20\" height=\"20\" version=\"1.1\" id=\"Layer_1\"\n                                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                                    xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n                                                    viewBox=\"0 0 18 18\" style=\"enable-background:new 0 0 18 18;\"\n                                                    xml:space=\"preserve\">\n                                                    <style type=\"text/css\">\n                                                        .st0 {\n                                                            fill: #001E50;\n                                                        }\n                                                    </style>\n                                                    <g>\n                                                        <path class=\"st0\" d=\"M4.1,8.1C3.6,8.1,3,7.9,2.6,7.5C1.2,6.2,0.6,4.7,1,3.3c0.4-1.7,1.9-2.4,3.1-2.4c0,0,0,0,0,0\n                                               c1.5,0,2.8,1,3.1,2.4C7.6,4.7,7,6.2,5.6,7.5C5.2,7.9,4.6,8.1,4.1,8.1z M4.1,2.1c-0.8,0-1.7,0.4-2,1.5l0,0c-0.2,1,0.2,2,1.3,3\n                                               c0.4,0.4,1,0.4,1.4,0c0.7-0.7,1.6-1.8,1.3-3C5.8,2.5,4.8,2.1,4.1,2.1z\" />\n                                                    </g>\n                                                    <g>\n                                                        <path class=\"st0\"\n                                                            d=\"M13.9,17.1c-0.5,0-1.1-0.2-1.5-0.6c-1.4-1.3-2-2.8-1.6-4.2c0.4-1.7,1.9-2.4,3.2-2.4c0,0,0,0,0,0\n                                               c1.5,0,2.8,1,3.1,2.4c0.3,1.4-0.2,2.9-1.6,4.2C15,16.9,14.4,17.1,13.9,17.1z M13.9,11.1c-0.8,0-1.7,0.4-2,1.5l0,0\n                                               c-0.3,1.2,0.5,2.3,1.3,3c0.4,0.4,1,0.4,1.4,0c0.7-0.7,1.6-1.8,1.3-3C15.6,11.5,14.6,11.1,13.9,11.1L13.9,11.1z\" />\n                                                    </g>\n                                                    <g>\n                                                        <path class=\"st0\"\n                                                            d=\"M9,14.8H7c-0.9,0-1.7-0.5-2-1.4c-0.3-0.8-0.1-1.7,0.6-2.3l6-5.2c0.4-0.4,0.3-0.9,0.2-1\n                                               c-0.1-0.1-0.3-0.6-0.8-0.6H9c-0.3,0-0.6-0.3-0.6-0.6S8.7,3.1,9,3.1h2c0.9,0,1.7,0.5,2,1.4c0.3,0.8,0.1,1.7-0.6,2.3l-6,5.2\n                                               c-0.4,0.4-0.3,0.9-0.3,1s0.3,0.6,0.8,0.6h2c0.3,0,0.6,0.3,0.6,0.6S9.3,14.8,9,14.8z\" />\n                                                    </g>\n                                                    <g>\n                                                        <path class=\"st0\"\n                                                            d=\"M4.1,4.9c-0.4,0-0.8-0.3-0.8-0.8s0.3-0.7,0.7-0.7h0c0.4,0,0.8,0.3,0.8,0.7S4.5,4.9,4.1,4.9z\" />\n                                                    </g>\n                                                    <g>\n                                                        <path class=\"st0\"\n                                                            d=\"M13.9,13.9c-0.4,0-0.8-0.3-0.8-0.8s0.3-0.8,0.7-0.8h0c0.4,0,0.8,0.3,0.8,0.8S14.3,13.9,13.9,13.9z\" />\n                                                    </g>\n                                                </svg>\n\n\n                                                {{\"totalDistance\" | translate}}: <span\n                                                    class=\"timeDistTitle\">{{service.convertToDutch(tripDetail?.distance)}}\n                                                    km</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n\n\n\n                    </div>\n                </div>\n            </div>\n            <div class=\"tripdetailBox h-100\">\n                <div class=\"tripDetails h-100\">\n                    <div class=\"tripDetailTopBox relBox h-100\">\n\n                        <div class=\"tripDetailBoxes\">\n                            \n                            <div class=\"tripBoxFields selected-box\"\n                                *ngIf=\"tripDetail?.driver_detail?.first_name || tripDetail?.driver_detail?.last_name\">\n                                <h4 class=\"tripId\"> {{service.convertToDutch(tripDetail?.safe_score) || 'NA'}} </h4>\n                                <p class=\"tripDesc\">{{\"vehScore\" | translate}}</p>\n                            </div>\n                            <div class=\"tripBoxFields \" *ngIf=\"tripDetail?.license_plate\">\n                                <h4 class=\"tripId\">{{tripDetail?.license_plate}}</h4>\n                                <p class=\"tripDesc\">{{\"v.license\" | translate}}</p>\n                            </div>\n                            \n                            <!-- <div class=\"tripBoxFields\" *ngIf=\"tripDetail?.safe_score\">\n                            <h4 class=\"tripId\">{{service.convertToDutch(tripDetail?.safe_score)}}</h4>\n                            <p class=\"tripDesc\">{{\"score\" | translate}}</p>\n                        </div> -->\n                        </div>\n                       \n                        <div class=\"dayNightSec\">\n                            <div class=\"dayNightBox\">\n                                <h5 class=\"dayNightHeading\" title='{{\"t.nightDriving\" | translate}}'>{{\"t.nightDriving\"\n                                    | translate}}</h5>\n                                <div class=\"commonBox night\">\n\n                                    <span\n                                        class=\"nightDetail\">{{service.convertToHoursMin(tripDetail?.tripDayNightCount?.nightTripMinute)}}</span>\n                                </div>\n                            </div>\n                            <div class=\"dayNightBox\">\n                                <h5 class=\"dayNightHeading\" title='{{\"t.dayDriving\" | translate}}'>{{\"t.dayDriving\" |\n                                    translate}}</h5>\n                                <div class=\"commonBox day\">\n\n                                    <span\n                                        class=\"nightDetail\">{{service.convertToHoursMin(tripDetail?.tripDayNightCount?.dayTripMinute)}}</span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n        <!-- Speed and road details-->\n        <!-- <div class=\"detailPageTrip\"> -->\n        <div class=\"tripDetails \">\n            <!-- <div class=\"tripDetailTopBox\"> -->\n            <div class=\"speedRoadSec\">\n                <div class=\"speedRoadRight\">\n                    <div class=\"scoreBoxRight\">\n                        <div class=\"filerHalf\">\n                            <div class=\"speedGraphTitle\"> {{\"t.speedScore\"| translate}}</div>\n                            <!-- <p class=\"defaultValue\">0</p> -->\n                            <ng-container *ngIf=\"speed !== '1001.0' && speed !== 1001 && speed !== '1001'; else elseTemplate\">\n                                <ngx-gauge [type]=\"gaugeType\" [value]=\"speed\" [thick]=15 [size]=100 [min]='gaugeMin'\n                                    [max]='gaugeMax' [thresholds]=\"thresholdConfig\">\n                                </ngx-gauge>\n                            </ng-container>\n                            <ng-template #elseTemplate>\n                                <p class=\"naData\">NA</p>\n                            </ng-template>\n\n                        </div>\n                        <div class=\"filerHalf\">\n                            <div class=\"speedGraphTitle\">{{\"t.cornerScore\"| translate}}</div>\n                            <ng-container *ngIf=\"cornering !== '1001.0' && cornering !== 1001 && cornering !== '1001'; else elseTemplate\">\n                                <ngx-gauge [type]=\"gaugeType\" [value]=\"cornering\" [thick]=15 [size]=100 [min]='gaugeMin'\n                                    [max]='gaugeMax' [thresholds]=\"thresholdConfig\">\n                                </ngx-gauge>\n                            </ng-container>\n                            <ng-template #elseTemplate>\n                                <p class=\"naData\">NA</p>\n                            </ng-template>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"speedRoadRight\">\n                    <div class=\"scoreBoxRight\">\n                        <div class=\"filerHalf\">\n                            <div class=\"speedGraphTitle\"> {{\"t.accScore\"| translate}}</div>\n                            <ng-container *ngIf=\"acceleration !== '1001.0' && acceleration !== 1001 && acceleration !== '1001'; else elseTemplate\">\n                                <ngx-gauge [type]=\"gaugeType\" [value]=\"acceleration\" [thick]=15 [size]=100\n                                    [min]='gaugeMin' [max]='gaugeMax' [thresholds]=\"thresholdConfig\">\n                                </ngx-gauge>\n                            </ng-container>\n                            <ng-template #elseTemplate>\n                                <p class=\"naData\">NA</p>\n                            </ng-template>\n                        </div>\n                        <div class=\"filerHalf\">\n                            <div class=\"speedGraphTitle\"> {{ \"t.deaccScore\" | translate}}</div>\n                            <ng-container *ngIf=\"braking !== '1001.0' && braking !== 1001 && braking !== '1001'; else elseTemplate\">\n                                <ngx-gauge [type]=\"gaugeType\" [value]=\"braking\" [thick]=15 [size]=100 [min]='gaugeMin'\n                                    [max]='gaugeMax' [thresholds]=\"thresholdConfig\">\n                                </ngx-gauge>\n                            </ng-container>\n                            <ng-template #elseTemplate>\n                                <p class=\"naData\">NA</p>\n                            </ng-template>\n                        </div>\n\n                    </div>\n                </div>\n                <div class=\"speedRoadLeft\">\n                    <div class=\"scoreBoxGuage h-100\">\n                        <div class=\"speedGraphTitle\"> {{\"idiling\" | translate}}</div>\n                        <ng-container *ngIf=\"idling !== '1001.0' && idling !== 1001 && idling !== '1001'; else elseTemplate\">\n                            <ngx-gauge [type]=\"gaugeType\" [value]=\"idling\" [thick]=15 [size]=100 [min]='gaugeMin'\n                                [max]='gaugeMax' [thresholds]=\"thresholdConfig\">\n                            </ngx-gauge>\n                        </ng-container>\n                        <ng-template #elseTemplate>\n                            <p class=\"naData\">NA</p>\n                        </ng-template>\n                    </div>\n\n\n                </div>\n\n            </div>\n            <!-- </div> -->\n        </div>\n        <div class=\"tripDetails\" [hidden]='!speedProfile.time || !speedProfile.time.length'>\n            <div class=\"tripDetailTopBox\">\n                <div class=\"d-flex justify-content-between\">\n                    <h5 class=\"graphTitle\">{{\"t.speedProfile\" | translate}}</h5>\n                    <div class=\"graphTab__checkbox\">\n                        <div class=\"graphTab__checkbox__safeScore\">\n                            <div class=\"checkbox-dynamic activeSafeScore\">\n\n                            </div>\n                            <label class=\"form-check-label\" for=\"flexCheckChecked\">{{\"speed\" | translate}} (km/h)</label>\n                        </div>\n\n                        <div class=\"graphTab__checkbox__otherScore\">\n                            <div class=\"checkbox-dynamic-second activeOther\">\n\n                            </div>\n                            <label class=\"form-check-label text-capitalize\" for=\"flexCheckChecked\">\n                                {{\"limit\" | translate}}\n                            </label>\n\n                        </div>\n                    </div>\n                </div>\n                <div id='chartDiv' (click)=\"openChartPopup(speedProfile,1)\">\n                    <canvas id=\"myChart\"></canvas>\n                </div>\n            </div>\n        </div>\n        <div class='mainBox mb-20' [hidden]=\"!roadTypeData || !roadTypeData.length\">\n            <h4 class=\"typeTitle\">{{\"vehicleDrivenSpeed\" | translate}}</h4>\n            <div class=\"speedChart\" style=\"height: 270px\">\n                <canvas id=\"roadType\"></canvas>\n              </div>\n        </div>\n        <!-- <div class=\"tripDetails \">\n            <div class=\"tripDetailTopBox\">\n                <div class=\"tripDetailBox mb-20\">\n                    <div class='roadDistribution'>\n                        <h4 class=\"typeTitle\"> {{\"t.roadDistribution\" | translate}}</h4>\n                        <ng-container *ngIf=\"!noRoadTypeData; else elseTemplate2\">\n                            <div class=\"mb-28\" fxLayout=\"row\" style=\"width: 100%; height: 15px;\">\n                                <div *ngFor=\"let item of showStackBar\" fxFlex=\"{{item.value}}\"\n                                    [ngStyle]=\"{'background-color': item?.color}\"></div>\n                            </div>\n\n                            <div class=\"getRide\">\n                                <p *ngFor=\"let item of showStackBar\" [ngClass]=\"item.class\"> {{item.speed}}<span\n                                        class=\"msg\"\n                                        [ngStyle]=\"{'background-color': item?.color}\">{{service.convertToDutch(item.value)\n                                        ||\n                                        '0'}}%</span></p>\n                            </div>\n                        </ng-container>\n                        <ng-template #elseTemplate2>\n                            <div class=\"noDataMainBox\">\n                                <div class=\"noData\"><img src=\"assets/images/nodata.png\"> </div>\n                            </div>\n                        </ng-template>\n\n                    </div>\n                </div>\n            </div>\n        </div> -->\n      \n\n        <div class=\"tripDetails\" [hidden]='!accProfile.time || !accProfile.time.length'>\n            <div class=\"tripDetailTopBox\">\n                <div class=\"d-flex justify-content-between\">\n                    <h5 class=\"graphTitle\">{{\"t.accProfile\" | translate}}</h5>\n                    <div class=\"graphTab__checkbox\">\n                        <div class=\"graphTab__checkbox__safeScore\">\n                            <div class=\"checkbox-dynamic activeSafeScore\">\n\n                            </div>\n                            <label class=\"form-check-label\" for=\"flexCheckChecked\">{{\"accelerationprofile\" | translate}}</label>\n                        </div>\n\n                        <div class=\"graphTab__checkbox__otherScore\">\n                            <div class=\"checkbox-dynamic-second activeOther\">\n\n                            </div>\n                            <label class=\"form-check-label text-capitalize\" for=\"flexCheckChecked\">\n                                {{\"breakingprofile\" | translate}}\n                            </label>\n\n                        </div>\n                    </div>\n                </div>\n                <div id='chartDiv' (click)=\"openChartPopup(accProfile,2)\">\n                    <canvas id=\"myChartAcc\"></canvas>\n                </div>\n            </div>\n        </div>\n        <div class=\"tripDetails\" [hidden]='!dayNightScore.date || !dayNightScore.date.length'>\n            <div class=\"tripDetailTopBox\">\n                <div class=\"d-flex justify-content-between graphTab\">\n                    <div class=\"graphTab__title\">\n                      <h4 class=\"graphTitle text-center text-capitalize d-inline-block\">\n                        {{ \"dayvsnightdrivingscore\" | translate }}\n                      </h4>\n                      <!-- <img class=\"pl-3\" src=\"assets/images/newIcons/export.svg\"> -->\n                    </div>\n                    <div class=\"graphTab__checkbox\">\n                      <div\n                        class=\"graphTab__checkbox__safeScore\"\n                        \n                      >\n                        <div\n                          class=\"checkbox-dynamic\"\n                         \n                        ></div>\n                        <label class=\"form-check-label\" for=\"flexCheckChecked\">{{\n                          \"daydriving\" | translate\n                        }}</label>\n                      </div>\n          \n                      <div\n                        class=\"graphTab__checkbox__otherScore\"\n                       \n                      >\n                        <div\n                          class=\"checkbox-dynamic-second\"\n                          \n                        ></div>\n                        <label\n                          class=\"form-check-label text-capitalize\"\n                          for=\"flexCheckChecked\"\n                        >\n                          {{ \"nightdriving\" | translate }}\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n          \n                  <div style=\"height: 250px\" >\n                    <canvas id=\"lineChartScore\"></canvas>\n                  </div>\n            </div>\n        </div>\n\n        <!-- </div> -->\n        <!-- Speed and road details-->\n\n        <!-- Exceptions during the trip-->\n        <!-- <div class=\"detailPageTrip\"> -->\n        <div class=\"tripDetails\" *ngIf=\"exceptionCount\">\n            <!-- <div class=\"tripDetailHead\">\n            <h4 class=\"tripDetailTitle\">{{\"t.exceptionDuringTrip\" | translate}}</h4>\n            <span class=\"exportRightIcon\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                        d=\"M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.18C2 19.83 4.17 22 7.81 22H16.18C19.82 22 21.99 19.83 21.99 16.19V7.81C22 4.17 19.83 2 16.19 2ZM8.64 12.81L13.02 8.43H10.59C10.18 8.43 9.84 8.09 9.84 7.68C9.84 7.27 10.18 6.93 10.59 6.93H14.83C14.93 6.93 15.02 6.95 15.12 6.99C15.3 7.07 15.45 7.21 15.53 7.4C15.57 7.49 15.59 7.59 15.59 7.69V11.93C15.59 12.34 15.25 12.68 14.84 12.68C14.43 12.68 14.09 12.34 14.09 11.93V9.5L9.7 13.87C9.55 14.02 9.36 14.09 9.17 14.09C8.98 14.09 8.79 14.02 8.64 13.87C8.35 13.58 8.35 13.1 8.64 12.81ZM18.24 17.22C16.23 17.89 14.12 18.23 12 18.23C9.88 18.23 7.77 17.89 5.76 17.22C5.37 17.09 5.16 16.66 5.29 16.27C5.42 15.88 5.84 15.66 6.24 15.8C9.96 17.04 14.05 17.04 17.77 15.8C18.16 15.67 18.59 15.88 18.72 16.27C18.84 16.67 18.63 17.09 18.24 17.22Z\"\n                        fill=\"#C5CDD4\" />\n                </svg>\n            </span>\n        </div> -->\n\n            <div class=\"tripHisTop\">\n                <div class=\"tripHisTopLeft\">\n                    <div>\n                        <h4 class=\"tripTitle mb-0 mr-30 d-inline-block\"><span class=\"countValue\">({{exceptionCount}}) </span> {{\"harshEvent\"\n                            | translate}}</h4>\n                            <svg class=\"mb-1\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path d=\"M7.49984 18.3337H12.4998C16.6665 18.3337 18.3332 16.667 18.3332 12.5003V7.50033C18.3332 3.33366 16.6665 1.66699 12.4998 1.66699H7.49984C3.33317 1.66699 1.6665 3.33366 1.6665 7.50033V12.5003C1.6665 16.667 3.33317 18.3337 7.49984 18.3337Z\" stroke=\"#667280\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                <path d=\"M8.82471 6.40039H12.358V9.94206\" stroke=\"#667280\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                <path d=\"M12.3583 6.40039L7.6416 11.1171\" stroke=\"#667280\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                <path d=\"M5 13.7588C8.24167 14.8421 11.7583 14.8421 15 13.7588\" stroke=\"#667280\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                </svg>\n                    </div>\n                            \n                    <!-- <mat-button-toggle-group class=\"historyButton\" [value]='tableView'\n                        (change)=\"toggleChange($event.value)\">\n                        <mat-button-toggle value=\"table\"> <svg width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\"\n                                xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                    d=\"M18.3332 5.29199C18.3332 5.63717 18.0534 5.91699 17.7082 5.91699H2.29151C1.94633 5.91699 1.6665 5.63717 1.6665 5.29199C1.6665 4.94681 1.94633 4.66699 2.29151 4.66699H17.7082C18.0534 4.66699 18.3332 4.94681 18.3332 5.29199Z\"\n                                    fill=\"white\" />\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                    d=\"M18.3332 10.5003C18.3332 10.8455 18.0534 11.1253 17.7082 11.1253H2.2915C1.94633 11.1253 1.6665 10.8455 1.6665 10.5003C1.6665 10.1551 1.94633 9.87532 2.2915 9.87532H17.7082C18.0534 9.87532 18.3332 10.1551 18.3332 10.5003Z\"\n                                    fill=\"white\" />\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                    d=\"M18.3332 15.7087C18.3332 16.0538 18.0534 16.3337 17.7082 16.3337H2.2915C1.94633 16.3337 1.6665 16.0538 1.6665 15.7087C1.6665 15.3635 1.94633 15.0837 2.2915 15.0837H17.7082C18.0534 15.0837 18.3332 15.3635 18.3332 15.7087Z\"\n                                    fill=\"white\" />\n                            </svg>\n                        </mat-button-toggle>\n                        <mat-button-toggle value=\"map\">\n                            <svg width=\"20\" height=\"21\" version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\"\n                                xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 20 20\"\n                                style=\"enable-background:new 0 0 20 20;\" xml:space=\"preserve\">\n                                <style type=\"text/css\">\n                                    .st0 {\n                                        fill: #C5CDD4;\n                                    }\n                                </style>\n                                <g>\n                                    <path class=\"st0\" d=\"M13,17.8c-0.4,0-0.7-0.1-1-0.2l-4.4-2.2c-0.3-0.1-0.8-0.1-1,0l-2,1.1C3.9,17,3,17.1,2.3,16.7\n                           c-0.7-0.4-1-1.2-1-2.1V6.5c0-0.7,0.5-1.6,1.1-2l3.6-2.1c0.6-0.3,1.5-0.4,2.1-0.1l4.4,2.2c0.3,0.1,0.8,0.1,1,0l2-1.1\n                           c0.8-0.5,1.7-0.5,2.4-0.2c0.7,0.4,1,1.2,1,2.1v8.1c0,0.7-0.5,1.6-1.1,2l-3.6,2.1C13.9,17.7,13.5,17.8,13,17.8z M7.2,14.1\n                           c0.4,0,0.7,0.1,1,0.2l4.4,2.2c0.3,0.1,0.8,0.1,1,0l3.6-2.1c0.3-0.2,0.5-0.6,0.5-0.9V5.4c0-0.5-0.2-0.9-0.4-1.1\n                           c-0.3-0.2-0.7-0.1-1.2,0.2l-2,1.1C13.6,5.9,12.7,6,12,5.7L7.7,3.5c-0.3-0.1-0.8-0.1-1,0L3,5.6C2.8,5.7,2.5,6.2,2.5,6.5v8.1\n                           c0,0.5,0.2,0.9,0.4,1.1c0.3,0.2,0.7,0.1,1.2-0.2l2-1.1C6.4,14.2,6.8,14.1,7.2,14.1z\" />\n                                </g>\n                                <g>\n                                    <path class=\"st0\"\n                                        d=\"M7.1,14.8c-0.3,0-0.6-0.3-0.6-0.6V3.3c0-0.3,0.3-0.6,0.6-0.6S7.7,3,7.7,3.3v10.8C7.7,14.5,7.5,14.8,7.1,14.8z\" />\n                                </g>\n                                <g>\n                                    <path class=\"st0\" d=\"M13.1,17.3c-0.3,0-0.6-0.3-0.6-0.6V5.5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v11.1\n                           C13.7,17,13.4,17.3,13.1,17.3z\" />\n                                </g>\n                            </svg>\n\n                        </mat-button-toggle>\n                    </mat-button-toggle-group> -->\n                </div>\n            </div>\n\n            <div class=\"tripDetailTopBox\">\n                <mat-accordion [displayMode]=\"displayMode\" [multi]=\"multi\" id=\"newcha\" class=\"mat-expansion-Common\"\n                    #firstAccordion=\"matAccordion\">\n                    <mat-expansion-panel #panel1 [hideToggle]=\"hideToggle\" *ngFor=\"let item of exceptionKeys\">\n                        <mat-expansion-panel-header>\n                            <!-- <div class=\"driverName\">\n                                <span>\n                                    <svg width=\"16\" height=\"18\" viewBox=\"0 0 16 18\" fill=\"none\"\n                                        xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                                            d=\"M3.48522 4.59114L3.95677 4.51355C4.41409 4.43805 4.85814 4.59752 5.16432 4.90273C5.2683 4.97295 5.35866 5.07902 5.42151 5.22537C5.85293 6.23071 6.7895 6.90127 7.85034 7.11146C8.33773 7.20808 9.23049 7.23448 9.59598 6.81523C10.2195 6.10243 11.3052 7.0518 10.6816 7.76459C9.93666 8.61941 8.62131 8.73765 7.57374 8.53016C6.98606 8.41402 6.42474 8.19378 5.92214 7.88439L6.01765 8.46312L3.77837 11.9294C3.4463 11.7256 3.20024 11.385 3.13214 10.9727L2.34114 6.18829C2.21654 5.43425 2.7313 4.7157 3.48533 4.59109L3.48522 4.59114ZM4.42879 0.236084C5.39877 0.236084 6.18499 1.0223 6.18499 1.99228C6.18499 2.96226 5.39877 3.74848 4.42879 3.74848C3.45882 3.74848 2.6726 2.96226 2.6726 1.99228C2.6726 1.0223 3.45882 0.236084 4.42879 0.236084V0.236084ZM0.105487 6.799C-0.0618451 5.86594 1.35684 5.61147 1.5242 6.54499C1.5258 6.55236 1.94824 8.93947 2.34049 10.9437C2.55964 12.0631 3.13457 12.6059 3.91082 12.8319C4.82115 13.097 6.04082 12.9971 7.32741 12.8308C8.26832 12.712 8.44891 14.1418 7.5085 14.2612C6.06118 14.4486 4.6684 14.5542 3.50922 14.2168C2.21609 13.8403 1.26516 12.9749 0.922022 11.221C0.656966 9.86767 0.107331 6.80744 0.105729 6.79958L0.105487 6.799ZM12.2438 3.88965C12.4134 3.14935 13.5395 3.40707 13.3695 4.14734L12.8235 6.52658L15.8146 11.3584C16.2128 12.0031 15.2312 12.6093 14.8331 11.9645L12.4566 8.12551L12.1034 9.66466C11.9338 10.405 10.8077 10.1472 10.9777 9.40697L12.2438 3.88965ZM6.28685 9.80105H9.37985C9.94164 9.80105 10.4095 10.2008 10.5151 10.7314L12.0251 15.8986C12.4476 17.3558 10.2315 17.9979 9.80904 16.5407L8.51592 12.1158H4.85198L6.28553 9.80055L6.28685 9.80105Z\"\n                                            fill=\"#474F5A\" />\n                                    </svg>\n                                </span>\n                                <span class=\"dName\">{{tripDetail?.driver_detail?.first_name}}\n                                    {{tripDetail?.driver_detail?.last_name}}</span>\n                            </div> -->\n\n                            <div class=\"speedingPoint\">\n                                <span class=\"speedTitle\">{{tripDetail?.license_plate}}: </span>\n                                <div class=\"exceptionName\">{{exceptionTypeObj[item]}}</div>\n                            </div>\n\n                            <div class=\"timeSec timewithMin\">{{service.convertHMS(exceptionArray[item].total_time)}}\n                            </div>\n                            <div class=\"timeSec\">{{formatToFixed(exceptionArray[item].distance,2)}} km</div>\n                            <div class=\"timeSec lantlong\">{{exceptionArray[item].length}}</div>\n                        </mat-expansion-panel-header>\n                        <!--map exception data old-->\n                        <!-- <div class=\"mat-expansion-Common-Body\" *ngFor=\"let alert of exceptionArray[item]; let j=index\">\n                            <div class=\"matCommon\">\n                                <p class=\"timeDateDesc\">{{service.formatDateAlert(alert.start_time)}}</p>\n                                <p class=\"timeSecBody speedingPointBody\" *ngIf=\"alert.score_type=='speed'\">\n                                    {{alert?.violation_rate || '0'}} km/h > {{alert?.limit || '0'}} km/h </p>\n                                <p class=\"timeSecBody speedingPointBody\"\n                                    *ngIf=\"alert.score_type=='acceleration' || alert.score_type=='breaking' || alert.score_type=='cornering'\">\n                                    {{formatToFixed(alert?.violation_rate,1)}} G > {{formatToFixed(alert?.limit,1)}} G\n                                </p>\n                                <p class=\"timeSecBody speedingPointBody\" *ngIf=\"alert.score_type=='idling'\">\n                                    {{service.convertHMS(alert?.violation_rate)}} > {{service.convertHMS(alert?.limit)}}\n                                </p>\n                                <p class=\"timeSec timeSecBody\">{{service.convertHMS(alert?.duration_seconds)}}</p>\n                                <p class=\"timeSec timeSecBody\">{{formatToFixed(alert.distance,2)}} km</p>\n                                <p class=\"timeSec timeSecBody lantlong\" *ngIf=\"alert.points && alert.points.length\">\n                                    {{formatToFixed(alert.points[0].latitude,2)}}° N,\n                                    {{formatToFixed(alert.points[0].longitude,2)}}° E </p>\n                            </div>\n                            <p class=\"cursor mapIcon\" (click)=\"singleExceptionShow(alert)\"><img\n                                    src=\"assets/images/map-exception.svg\"></p>\n                        </div>  -->\n                        <!--map exception data old-->\n                        <div class=\"mat-expansion-Common-Body\" *ngFor=\"let alert of exceptionArray[item]; let j=index\">\n                            <div class=\"exceptionDetail\">\n                                <p class=\"exceptionDate\">\n                                    <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\"\n                                        xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 20 20\"\n                                        style=\"enable-background:new 0 0 20 20;\" xml:space=\"preserve\">\n                                        <style type=\"text/css\">\n                                            .st0 {\n                                                fill: #474F5A;\n                                            }\n                                        </style>\n                                        <g>\n                                            <path class=\"st0\" d=\"M10,19.1c-5,0-9.1-4.1-9.1-9.1S5,0.9,10,0.9S19.1,5,19.1,10S15,19.1,10,19.1z M10,2.4c-4.2,0-7.6,3.4-7.6,7.6\n                                       s3.4,7.6,7.6,7.6s7.6-3.4,7.6-7.6S14.2,2.4,10,2.4z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M13.1,13.4c-0.1,0-0.3,0-0.4-0.1l-2.6-1.5c-0.7-0.4-1.2-1.3-1.2-2.1V6.3c0-0.4,0.3-0.8,0.8-0.8\n                                       s0.8,0.3,0.8,0.8v3.4c0,0.3,0.2,0.7,0.4,0.8l2.6,1.5c0.4,0.2,0.5,0.7,0.3,1C13.6,13.3,13.3,13.4,13.1,13.4z\" />\n                                        </g>\n                                    </svg>\n                                    {{dateTimeFormat(alert.start_time)}}\n                                </p>\n                                <p class=\"exceptionTitle\">\n                                    <span *ngIf=\"alert.score_type=='speed'\">{{formatToFixed(alert?.violation_rate,2) || '0'}} km/h >\n                                        {{formatToFixed(alert?.limit,2) || '0'}}km/h</span>\n                                    <span\n                                        *ngIf=\"alert.score_type=='acceleration' || alert.score_type=='breaking' || alert.score_type=='cornering'\">\n                                        {{formatToFixed(alert?.violation_rate,1)}} G > {{formatToFixed(alert?.limit,1)}}\n                                        G\n                                    </span>\n                                    <span *ngIf=\"alert.score_type=='idling'\">\n                                        {{service.convertHMS(alert?.violation_rate)}} >\n                                        {{service.convertHMS(alert?.limit)}}\n                                    </span>\n                                </p>\n                                <p class=\"exceptionTitle\">{{service.convertHMS(alert?.duration_seconds)}}</p>\n                                <p class=\"exceptionTitle\">{{formatToFixed(alert.distance,2)}} km</p>\n                                <p class=\"cursor\" (click)=\"singleExceptionShow(alert)\"><svg width=\"20\" height=\"21\" version=\"1.1\"\n                                        id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\"\n                                        xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 20 20\"\n                                        style=\"enable-background:new 0 0 20 20;\" xml:space=\"preserve\">\n                                        <style type=\"text/css\">\n                                            .st0 {\n                                                fill: #C5CDD4;\n                                            }\n                                        </style>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M13,17.8c-0.4,0-0.7-0.1-1-0.2l-4.4-2.2c-0.3-0.1-0.8-0.1-1,0l-2,1.1C3.9,17,3,17.1,2.3,16.7\n                                       c-0.7-0.4-1-1.2-1-2.1V6.5c0-0.7,0.5-1.6,1.1-2l3.6-2.1c0.6-0.3,1.5-0.4,2.1-0.1l4.4,2.2c0.3,0.1,0.8,0.1,1,0l2-1.1\n                                       c0.8-0.5,1.7-0.5,2.4-0.2c0.7,0.4,1,1.2,1,2.1v8.1c0,0.7-0.5,1.6-1.1,2l-3.6,2.1C13.9,17.7,13.5,17.8,13,17.8z M7.2,14.1\n                                       c0.4,0,0.7,0.1,1,0.2l4.4,2.2c0.3,0.1,0.8,0.1,1,0l3.6-2.1c0.3-0.2,0.5-0.6,0.5-0.9V5.4c0-0.5-0.2-0.9-0.4-1.1\n                                       c-0.3-0.2-0.7-0.1-1.2,0.2l-2,1.1C13.6,5.9,12.7,6,12,5.7L7.7,3.5c-0.3-0.1-0.8-0.1-1,0L3,5.6C2.8,5.7,2.5,6.2,2.5,6.5v8.1\n                                       c0,0.5,0.2,0.9,0.4,1.1c0.3,0.2,0.7,0.1,1.2-0.2l2-1.1C6.4,14.2,6.8,14.1,7.2,14.1z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\"\n                                                d=\"M7.1,14.8c-0.3,0-0.6-0.3-0.6-0.6V3.3c0-0.3,0.3-0.6,0.6-0.6S7.7,3,7.7,3.3v10.8C7.7,14.5,7.5,14.8,7.1,14.8z\" />\n                                        </g>\n                                        <g>\n                                            <path class=\"st0\" d=\"M13.1,17.3c-0.3,0-0.6-0.3-0.6-0.6V5.5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v11.1\n                                       C13.7,17,13.4,17.3,13.1,17.3z\" />\n                                        </g>\n                                    </svg>\n                                </p>\n                            </div>\n                            <!-- <div class=\"exceptionDetail\">\n                                <div class=\"eventName\">\n                                    <p class=\"exceptionTitle\">Event: </p>\n                                    <p class=\"exceptiodetail\" *ngIf=\"percentage_of_violation_min==0 || percentage_of_violation_min==null\" title=\"<0 - 05% exeeding limit longer than time\">\n                                        <0 - 05% exeeding limit longer than time </p>\n                                    <p class=\"exceptiodetail\" *ngIf=\"percentage_of_violation_min==5\" title=\"<05 - 10% exeeding limit longer than time\">\n                                        <5 - 10% exeeding limit longer than time </p>\n                                    <p class=\"exceptiodetail\" *ngIf=\"percentage_of_violation_min==10\" title=\">10% exeeding limit longer than time\">\n                                    >10% exeeding limit longer than time </p>\n                                </div>\n\n                                <p class=\"exceptionTitle\">Day driving: <span>1h 24m</span></p>\n                                <p class=\"exceptionTitle\">Night driving: <span>1h 24m</span></p>\n                            </div> -->\n                        </div>\n\n                    </mat-expansion-panel>\n                </mat-accordion>\n            </div>\n        </div>\n        <!-- </div> -->\n\n\n        <!-- Exceptions during the trip-->\n    </div>\n    <div class=\"mapShow\" id='map'>\n        <app-trip-detail-map [tripDetail]='tripDetail' [alerts]='mapAlerts' [singleId]='singleAlertId'\n            [hideShowAlerts]='exceptionShowOnMap'></app-trip-detail-map>\n    </div>\n</div>","\n<button mat-button class=\"close\" (click)=\"onNoClick()\"><img src=\"assets/images/Close.svg\"></button>\n<div mat-dialog-content>\n    <span class=\"chartZoom cursor\" (click)=\"resetZoom()\">Zoom Reset</span>\n    <div class=\"chartDiv\">\n        <canvas id=\"popupChart\"></canvas>\n    </div>\n    <ng-container *ngIf=\"data.type == 1; else elseTemplate\">\n        <h5 class=\"profileNameDark text-center\">{{\"t.speedProfile\" | translate}}</h5>\n    </ng-container>\n    <ng-template #elseTemplate>\n        <h5 class=\"profileNameDark text-center mb-0\">{{\"t.accProfile\" | translate}}</h5>\n    </ng-template>\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RouteConfig } from 'src/app/config/route-config';\nimport { TripDashboardComponent } from './trip-dashboard/trip-dashboard.component';\nimport { TripDetailComponent } from './trip-detail/trip-detail.component';\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: TripDashboardComponent,\n    pathMatch: 'full'\n  },\n  {\n    path: RouteConfig.tripDetail.path,\n    component: TripDetailComponent,\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TripRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TripRoutingModule } from './trip-routing.module';\nimport { DialogContentExampleDialog, TripDetailComponent } from './trip-detail/trip-detail.component';\nimport { TripDashboardComponent } from './trip-dashboard/trip-dashboard.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { MaterialModules } from 'src/app/config/material';\nimport { NgxGaugeModule } from 'ngx-gauge';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { NgxDaterangepickerMd } from 'ngx-daterangepicker-material';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ComponentModule } from 'src/app/shared/components/component.module';\nimport { NgxShimmerLoadingModule } from 'ngx-shimmer-loading';\n\n\n@NgModule({\n  declarations: [TripDetailComponent, TripDashboardComponent, DialogContentExampleDialog],\n  imports: [\n    CommonModule,\n    TripRoutingModule,\n    FormsModule,\n    SharedModule,\n    NgxDaterangepickerMd.forRoot(),\n    MaterialModules,\n    NgxGaugeModule,\n    NgbModule,\n    FlexLayoutModule,\n    TranslateModule.forChild({\n      extend: true\n    }),\n    ComponentModule,\n    NgxShimmerLoadingModule\n  ],\n  \n})\n\n\nexport class TripModule {\n}"]}
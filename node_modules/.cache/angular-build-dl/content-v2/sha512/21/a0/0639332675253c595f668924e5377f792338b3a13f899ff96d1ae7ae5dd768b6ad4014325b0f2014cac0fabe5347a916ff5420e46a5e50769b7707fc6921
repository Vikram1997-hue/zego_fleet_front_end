{"version":3,"sources":["./src/app/main/fleetOverview/mapview/mapview-routing.module.ts","./src/app/main/fleetOverview/mapview/mapview.module.ts","./src/app/main/fleetOverview/mapview/mapview-dashboard/mapview-dashboard.component.ts","./src/app/main/fleetOverview/mapview/mapview-dashboard/mapview-dashboard.component.html"],"names":[],"mappings":"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","file":"fleetOverview-mapview-mapview-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MapviewDashboardComponent } from './mapview-dashboard/mapview-dashboard.component';\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: MapviewDashboardComponent,\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MapviewRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MapviewRoutingModule } from './mapview-routing.module';\nimport { MapviewDashboardComponent } from './mapview-dashboard/mapview-dashboard.component';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NgxDaterangepickerMd } from 'ngx-daterangepicker-material';\nimport { MaterialModules } from 'src/app/config/material';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { NgxShimmerLoadingModule } from 'ngx-shimmer-loading';\n\n\n@NgModule({\n  declarations: [MapviewDashboardComponent],\n  imports: [\n    CommonModule,\n    MapviewRoutingModule,\n    FormsModule,\n    SharedModule,\n    NgxDaterangepickerMd.forRoot(),\n    MaterialModules,\n    NgbModule,\n    TranslateModule.forChild({\n      extend: true\n    }),\n    NgxShimmerLoadingModule,\n  ]\n})\nexport class MapviewModule { }\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AppConfig } from 'src/app/config/app-config';\nimport { LocalService } from 'src/app/services/local.service';\nimport { MainService } from 'src/app/services/main.service';\nimport { environment as ENV } from '../../../../../environments/environment';\nimport * as moment from 'moment';\nimport { RouteConfig } from 'src/app/config/route-config';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\ndeclare var google;\n\n@Component({\n  selector: 'app-mapview-dashboard',\n  templateUrl: './mapview-dashboard.component.html',\n  styleUrls: ['./mapview-dashboard.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MapviewDashboardComponent implements OnInit {\n  public isCollapsed = true;\n\n  map;\n  selectedOrgID: any;\n  searchString: string;\n\n  searchCategory: string;\n  searchVehicle: string;\n\n  vehicleCategoryData: any = [];\n  vehicleList: any = [];\n\n  selectedVehicleCategory: any = 'all';\n  selectedVehicle: any = 'all';\n  bounds = new google.maps.LatLngBounds();\n\n  vehicleMarkerList: any = {};\n  socket;\n  colorsVariable: any;\n  customeRange='Custom';\n  setDate='Set Date';\n  cancelDate='Cancel';\n  filterCalledMap = new Subject();\n\n  constructor(private cd: ChangeDetectorRef,\n    public service: MainService,\n    private router: Router,\n    private localService: LocalService) { }\n  ngOnInit(): void {\n    this.filterCalledMap = new Subject();\n\n    setTimeout(() => {\n      this.initMap()\n    }, 20)\n\n    this.filterCalledMap.pipe(\n      debounceTime(500),\n    ).subscribe(\n      value => {\n        if(value){\n          this.selectedOrgID = this.localService.getItem(\"selectedOrgs\")\n          if (this.selectedOrgID) {\n            this.selectedOrgID = JSON.parse(this.selectedOrgID);\n          }\n          this.resetToLastState();\n          this.filterApply();\n        }\n      }\n    )\n\n\n    this.getSocketToken()\n\n    this.localService.getFilter().subscribe((val)=>{\n      if(val  && this.router.url.split('?')[0] == RouteConfig.mapview.url){\n        this.filterCalledMap.next(true)\n      }\n    })\n\n    this.selectedOrgID = this.localService.getItem(\"selectedOrgs\")\n    if (this.selectedOrgID) {\n      this.selectedOrgID = JSON.parse(this.selectedOrgID);\n    }\n    if (this.selectedOrgID) {\n      this.resetToLastState();\n      this.updatePageData()\n    }\n  }\n\n  getSocketToken() {\n    this.service.get(`validateSocket`).pipe().subscribe(response => {\n      if (response.access_token) {\n        let url = ENV.socketUrl + '?token=' + response.access_token\n        this.socket = new WebSocket(url);\n\n        let _this = this;\n        this.socket.addEventListener('message', function (event) {\n          \n          _this.dataParse(event.data)\n        });\n        this.socket.addEventListener('close', function (event) {\n          // console.log('The connection has been closed');\n        });\n      }\n    }, (error) => {\n\n    })\n\n  }\n\n\n  getVehicleCategory() {\n    this.searchCategory = '';\n    this.service.get(`vehicles/category-by-organisation?organisation=${JSON.stringify(this.selectedOrgID)}`).pipe().subscribe(response => {\n      if (response.data && response.data.length) {\n        this.vehicleCategoryData = response.data;\n        this.selectedVehicleCategory = 'all';\n      }\n    }, (error) => {\n\n    })\n  }\n\n  getVehicles(categoryId?) {\n    if ((categoryId && categoryId == 'all') || categoryId == undefined) {\n      categoryId = ''\n    }\n    this.searchVehicle = '';\n    this.service.get(`vehicles/by-organisation?organisation=${JSON.stringify(this.selectedOrgID)}`).pipe().subscribe(response => {\n      if (response.data && response.data.length) {\n        this.vehicleList = response.data;\n        this.selectedVehicle = 'all';\n      }\n    }, (error) => {\n\n    })\n  }\n\n  initMap() {\n    var neitherLandCordi = new google.maps.LatLng(AppConfig.netherlandLat, AppConfig.netherlandLong);\n    this.map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 8,\n      center: neitherLandCordi,\n      disableDefaultUI: true,\n      draggable: true,\n      scaleControl: true,\n      zoomControl: true,\n      zoomControlOptions: {\n        style: google.maps.ZoomControlStyle.SMALL,\n        position: google.maps.ControlPosition.TOP_RIGHT\n      },\n      fullscreenControl: true,\n      fullscreenControlOptions: {\n        style: google.maps.ZoomControlStyle.SMALL,\n        position: google.maps.ControlPosition.BOTTOM_RIGHT\n      },\n    });\n    this.map.setOptions({ styles: AppConfig.mapStyle });\n  }\n\n  createMarker(data) {\n    var infowindow = new google.maps.InfoWindow({\n      content: ''\n    });\n    let color = '#' + (Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0');\n    if (!data.license_plate || data.license_plate == 'null') {\n      data.license_plate = 'NA'\n    }\n    data.driver_name = data.driver_name ? data.driver_name : \"NA\";\n    data.road_type = data.road_type ? data.road_type : \"NA\";\n    let html = `\n    <div style=\"display:flex; flex-wrap:wrap; justify-content: space-between; align-items:center; padding:5px 0;\">\n    <div style=\"padding:10px; width:145px; text-align:center; background: rgba(71, 79, 90, 0.05);\n    border-radius: 8px; font: 600 12px/18px ModernEra; color:#474F5A; margin-right:10px\">\n        License: <span style=\"color:#474F5A; font: 600 14px/18px ModernEra; margin-left:6px\">${data.license_plate}</span>\n    </div>\n    `\n    let extendedHtml = `\n    <div>\n        <div style=\"padding:10px; width:185px; text-align:center; background: rgba(71, 79, 90, 0.05);\n    border-radius: 8px; font: 600 12px/18px ModernEra; color:#474F5A\">\n        Speed: <span style=\"color:#474F5A; font: 600 14px/18px ModernEra; margin-left:6px\">${this.service.convertToDutch(data.current_speed)} kmph</span>\n    </div>\n    </div>`\n    var latLng = new google.maps.LatLng(data.current_lat, data.current_long);\n    if (data.pre_lat == data.current_lat && data.pre_long == data.current_long || data.idle_time > 120) {\n      html = html + `</div>`;\n      this.vehicleMarkerList[data.vehicle_id] = new google.maps.Marker({\n        position: latLng,\n        icon: {\n          path: google.maps.SymbolPath.CIRCLE,\n          fillColor: color,\n          fillOpacity: 1,\n          strokeColor: color,\n          scale: 6\n        },\n        map: this.map,\n      });\n    }\n    else {\n      html = html + extendedHtml + `</div>`;\n      this.vehicleMarkerList[data.vehicle_id] = new google.maps.Marker({\n        position: latLng,\n        icon: {\n          path: 'M21.134 4.5C21.5189 3.83333 22.4811 3.83333 22.866 4.5L31.134 18.8205C31.5189 19.4872 31.0378 20.3205 30.268 20.3205H13.7321C12.9622 20.3205 12.4811 19.4872 12.866 18.8205L21.134 4.5Z',\n          fillColor: color,\n          fillOpacity: 1,\n          strokeColor: color,\n          scale: 1\n        },\n        map: this.map,\n      });\n    }\n\n    this.bindInfoWindow(this.vehicleMarkerList[data.vehicle_id], this.map, infowindow, html, data.vehicle_id);\n    this.bounds.extend(latLng);\n    this.map.fitBounds(this.bounds);\n\n  }\n\n\n  updateMarker(data) {\n    var latlng = new google.maps.LatLng(data.current_lat, data.current_long);\n    let color = this.vehicleMarkerList[data.vehicle_id].icon.fillColor;\n\n    var infowindow = new google.maps.InfoWindow({\n      content: ''\n    });\n    if (!data.license_plate || data.license_plate == 'null') {\n      data.license_plate = 'NA'\n    }\n    data.driver_name = data.driver_name ? data.driver_name : \"NA\";\n    data.road_type = data.road_type ? data.road_type : \"NA\";\n\n    let html = `\n    <div style=\"display:flex; flex-wrap:wrap; justify-content: space-between; align-items:center; padding:5px 0;\">\n    <div style=\"padding:10px; width:145px; text-align:center; background: rgba(71, 79, 90, 0.05);\n    border-radius: 8px; font: 600 12px/18px ModernEra; color:#474F5A; margin-right:10px\">\n        License: <span style=\"color:#474F5A; font: 600 14px/18px ModernEra; margin-left:6px\">${data.license_plate}</span>\n    </div>\n    `\n    let extendedHtml = `\n    <div>\n        <div style=\"padding:10px; width:185px; text-align:center; background: rgba(71, 79, 90, 0.05);\n    border-radius: 8px; font: 600 12px/18px ModernEra; color:#474F5A\">\n    Speed: <span style=\"color:#474F5A; font: 600 14px/18px ModernEra; margin-left:6px\">${this.service.convertToDutch(data.current_speed)} kmph</span>\n    </div>\n    </div>`\n    if ((data.pre_lat == data.current_lat && data.pre_long == data.current_long || data.idle_time > 120)) {\n      html = html + `</div>`;\n      this.vehicleMarkerList[data.vehicle_id].setIcon({\n        path: google.maps.SymbolPath.CIRCLE,\n        fillColor: color,\n        fillOpacity: 1,\n        strokeColor: color,\n        scale: 6\n      })\n      this.vehicleMarkerList[data.vehicle_id].setPosition(latlng);\n    }\n    else {\n      html = html + extendedHtml + `</div>`;\n      this.vehicleMarkerList[data.vehicle_id].setIcon({\n        path: 'M21.134 4.5C21.5189 3.83333 22.4811 3.83333 22.866 4.5L31.134 18.8205C31.5189 19.4872 31.0378 20.3205 30.268 20.3205H13.7321C12.9622 20.3205 12.4811 19.4872 12.866 18.8205L21.134 4.5Z',\n        fillColor: color,\n        fillOpacity: 1,\n        strokeColor: color,\n        scale: 1\n      })\n      this.animatedMove(this.vehicleMarkerList[data.vehicle_id], .5, this.vehicleMarkerList[data.vehicle_id].position, latlng);\n    }\n    this.bindInfoWindow(this.vehicleMarkerList[data.vehicle_id], this.map, infowindow, html, data.vehicle_id);\n    // this.bounds.extend(latlng);\n    // this.map.fitBounds(this.bounds);\n  }\n\n\n  listernerArray: any = {};\n  bindInfoWindow(marker, map, infowindow, html, vehicleId) {\n    if (this.listernerArray[vehicleId]) {\n      google.maps.event.removeListener(this.listernerArray[vehicleId]);\n    }\n\n    this.listernerArray[vehicleId] = google.maps.event.addListener(marker, 'mouseover', function () {\n      infowindow.setContent(html);\n      infowindow.open(map, marker);\n    });\n    google.maps.event.addListener(marker, 'mouseout', function () {\n      infowindow.close();\n    });\n\n    google.maps.event.addListener(marker, 'dblclick', function () {\n      map.setZoom(12);\n      map.setCenter(marker.getPosition());\n    });\n  }\n\n\n  resetToLastState() {\n    let category = this.localService.getItem(\"category\")\n    let vehicle = this.localService.getItem(\"vehicle\")\n    category && category !== 'all' ? this.selectedVehicleCategory = JSON.parse(category) : this.selectedVehicleCategory = 'all';\n    vehicle && vehicle !== 'all' ? this.selectedVehicle = vehicle : this.selectedVehicle = 'all';\n  }\n\n  filterApply() {\n    this.localService.setItem(\"category\", this.selectedVehicleCategory)\n    this.localService.setItem(\"vehicle\", this.selectedVehicle)\n    this.clearOverlays();\n    this.updatePageData();\n  }\n\n  clearOverlays() {\n    let key = Object.keys(this.vehicleMarkerList)\n    for (var i = 0; i < key.length; i++) {\n      this.vehicleMarkerList[key[i]].setMap(null);\n    }\n    this.vehicleMarkerList = {};\n  }\n\n  waitForSocketConnection(socket, callback) {\n    let _this = this;\n    setTimeout(\n      function () {\n        if (socket && socket.readyState === 1) {\n          // console.log(\"Connection is made\")\n          if (callback != null) {\n            callback();\n          }\n        } else {\n          // console.log(\"wait for connection...\")\n          _this.waitForSocketConnection(socket, callback);\n        }\n\n      }, 5); // wait 5 milisecond for the connection...\n  }\n  interval;\n  updatePageData() {\n    let _this = this;\n    let category = [];\n    let vehicle = [];\n    if ((this.selectedVehicle && this.selectedVehicle !== 'all')) {\n      vehicle = [this.selectedVehicle]\n    }\n    else {\n      if ((this.selectedVehicleCategory && this.selectedVehicleCategory !== 'all')) {\n        category = [this.selectedVehicleCategory]\n      }\n    }\n\n    // this.getDashboardData();\n    let timestamp = '';\n\n    if (this.map) {\n      this.map.setCenter(new google.maps.LatLng(AppConfig.netherlandLat, AppConfig.netherlandLong))\n      this.map.setZoom(8)\n    }\n\n    clearInterval(this.interval)\n    let val = 0;\n    // this.listernerArray = {};\n    if (this.selectedOrgID.length) {\n      // Wait until the state of the socket is not ready and send the message when it is...\n      this.interval = setInterval(() => {\n        this.waitForSocketConnection(this.socket, function () {\n          let data = {\n            \"action\": \"liveFeed\",\n            \"orgId\": _this.selectedOrgID,\n            \"vehicleCategory\": category,\n            \"licensePlate\": vehicle,\n            \"message\": \"testing\",\n            \"timestamp\": timestamp\n          }\n          if (val == 0) {\n            _this.clearOverlays();\n          }\n          val = val + 1;\n          // console.log(\"message sent!!!\", data);\n          timestamp = moment().utc().format(\"yyyy-M-D hh:mm:ss\");\n          _this.socket.send(JSON.stringify(data))\n\n        });\n      }, 2000)\n    }\n\n  }\n\n  // dashBoardData: any = {}\n  // isLoadingshimmer = false;\n  // getDashboardData() {\n  //   this.isLoadingshimmer = true;\n  //   let querryParams = this.createQuerryparams()\n  //   this.service.get(`zego/dashboard/activity-count-v2?${querryParams}`).pipe().subscribe(response => {\n  //     if (response.data) {\n  //       this.dashBoardData = response.data;\n  //       this.dashBoardData[\"safeScoreChange\"] = parseFloat(\n  //         this.dashBoardData.pre_safe_score\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_safe_score\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.safe_score\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.safe_score) -\n  //           parseFloat(this.dashBoardData.pre_safe_score)) /\n  //           parseFloat(this.dashBoardData.pre_safe_score)) *\n  //         100\n  //         : 0;\n\n  //       this.dashBoardData[\"driverChange\"] = parseFloat(\n  //         this.dashBoardData.pre_total_drivers\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_total_drivers\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.total_drivers\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.total_drivers) -\n  //           parseFloat(this.dashBoardData.pre_total_drivers)) /\n  //           parseFloat(this.dashBoardData.pre_total_drivers)) *\n  //         100\n  //         : 0;\n\n  //       this.dashBoardData[\"tripChange\"] = parseFloat(\n  //         this.dashBoardData.pre_total_trips\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_total_trips\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.total_trips\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.total_trips) -\n  //           parseFloat(this.dashBoardData.pre_total_trips)) /\n  //           parseFloat(this.dashBoardData.pre_total_trips)) *\n  //         100\n  //         : 0;\n\n  //       this.dashBoardData[\"vehicleChange\"] = parseFloat(\n  //         this.dashBoardData.pre_total_drivers\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_total_drivers\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.total_vehicles\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.total_vehicles) -\n  //           parseFloat(this.dashBoardData.pre_total_vehicles)) /\n  //           parseFloat(this.dashBoardData.pre_total_vehicles)) *\n  //         100\n  //         : 0;\n\n  //       this.dashBoardData[\"exceptionChange\"] = parseFloat(\n  //         this.dashBoardData.pre_exception\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_exception\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.exception\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.exception) -\n  //           parseFloat(this.dashBoardData.pre_exception)) /\n  //           parseFloat(this.dashBoardData.pre_exception)) *\n  //         100\n  //         : 0;\n\n  //       this.dashBoardData[\"distanceChange\"] = parseFloat(\n  //         this.dashBoardData.pre_total_distance\n  //       ) !== 1001 && parseFloat(\n  //         this.dashBoardData.pre_total_distance\n  //       ) !== 0 && parseFloat(\n  //         this.dashBoardData.total_distance\n  //       ) !== 1001\n  //         ? ((parseFloat(this.dashBoardData.total_distance) -\n  //           parseFloat(this.dashBoardData.pre_total_distance)) /\n  //           parseFloat(this.dashBoardData.pre_total_distance)) *\n  //         100\n  //         : 0;\n  //     }\n  //     this.isLoadingshimmer = false;\n  //     this.cd.detectChanges();\n  //   }, (error) => {\n  //     this.dashBoardData = {};\n  //     this.isLoadingshimmer = false;\n  //     this.cd.detectChanges();\n  //   })\n  // }\n\n  // createQuerryparams() {\n  //   let querryParams = `organisation=${JSON.stringify(this.selectedOrgID)}`;\n  //   querryParams = querryParams + `&from_date=${moment().subtract(1, 'month').startOf('month').format('YYYY-MM-DD')}`\n  //   querryParams = querryParams + `&to_date=${moment().subtract(1, 'month').endOf('month').format('YYYY-MM-DD')}`\n  //   querryParams = querryParams + `&custom_filter=false&filter_value=4`\n  //   return querryParams;\n  // }\n\n\n  dataParse(event) {\n    event = JSON.parse(event)\n    if (event.action && event.action == 'liveFeed' && event.data) {\n      let data = event.data;\n      for (let i = 0; i < data.length; i++) {\n        if (this.interval) {\n          let key = Object.keys(this.vehicleMarkerList)\n          // if(data[i]['license_plate']=='VBB-92-F')\n          // console.log(data[i])\n          if (key.includes(String(data[i]['vehicle_id']))) {\n            this.updateMarker(data[i])\n            // console.log(data[i]);\n            \n          }\n          else {\n            this.createMarker(data[i]);\n            // console.log(data[i]);\n          }\n        }\n        else {\n          break;\n        }\n      }\n    }\n  }\n\n  resetFilter() {\n    this.selectedVehicleCategory = 'all';\n    this.selectedVehicle = 'all';\n    this.filterApply();\n  }\n\n  animatedMove(marker, t, current, moveto) {\n    var deltalat = (moveto.lat() - current.lat()) / 100;\n    var deltalng = (moveto.lng() - current.lng()) / 100;\n\n    var delay = 10 * t;\n    for (var i = 0; i < 100; i++) {\n      (function (ind) {\n        setTimeout(\n          function () {\n            var lat = marker.position.lat();\n            var lng = marker.position.lng();\n            lat += deltalat;\n            lng += deltalng;\n            let latlng = new google.maps.LatLng(lat, lng);\n            marker.setPosition(latlng);\n          }, delay * ind\n        );\n      })(i)\n    }\n\n  }\n\n  ngOnDestroy(): void {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    // this.webSocket.removeListener();\n    clearInterval(this.interval);\n    if (this.socket)\n      this.socket.removeEventListener('message', function (event) {\n        console.log('removed')\n      });\n  }\n\n}","\n<div class=\"mapSec\">\n  <div class=\"mapTitle\">\n    <h4>{{ \"sidebar.mapView\" | translate }}</h4>\n\n    <span\n      ><svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M7.49984 18.3332H12.4998C16.6665 18.3332 18.3332 16.6665 18.3332 12.4998V7.49984C18.3332 3.33317 16.6665 1.6665 12.4998 1.6665H7.49984C3.33317 1.6665 1.6665 3.33317 1.6665 7.49984V12.4998C1.6665 16.6665 3.33317 18.3332 7.49984 18.3332Z\"\n          stroke=\"#667280\"\n          stroke-width=\"1.5\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        />\n        <path\n          d=\"M8.82471 6.3999H12.358V9.94157\"\n          stroke=\"#667280\"\n          stroke-width=\"1.5\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        />\n        <path\n          d=\"M12.3583 6.3999L7.6416 11.1166\"\n          stroke=\"#667280\"\n          stroke-width=\"1.5\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        />\n        <path\n          d=\"M5 13.7583C8.24167 14.8416 11.7583 14.8416 15 13.7583\"\n          stroke=\"#667280\"\n          stroke-width=\"1.5\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        />\n      </svg>\n    </span>\n  </div>\n \n  <div class=\"mapBox\">\n    <div id=\"map\"></div>\n  </div>\n</div>\n"],"sourceRoot":"webpack:///"}